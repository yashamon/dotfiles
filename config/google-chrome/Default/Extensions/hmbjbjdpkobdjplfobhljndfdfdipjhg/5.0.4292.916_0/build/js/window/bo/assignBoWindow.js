"use strict";var assignBoContext,constAssignBoWinTemplate,assignBo=function(){function o(){$("#window-assignBo ul").off("click").on("click",function(n){var e,o,i=$(n.target);i.hasClass("input-box")&&(e=i.parent("li"),o=e.attr("userid"),e.attr("userguid"),e.find("label").text(),i.is(":checked")?invokeBoWinFunc(function(n){this.bo.assignAttendeeToRoom(n,assignBoContext.roomId)},[o]):invokeBoWinFunc(function(n){this.bo.removeAttendee(n,assignBoContext.roomId)},[o]),invokeBoWinFunc(function(){this.bo.updateOpenAllRoomsBtn()},[]))}),escEvt("#window-assignBo",function(){hideAllBOWinExceptMainBoWin()})}function i(){!function(){var n=mainAppHtmlWindow.inmeeting.getAttendeesFromBoItems(),e=[];_.forEach(n,function(n){e.push({userID:n.userID,userGUID:n.userGUID,userDisplayName:n.userDisplayName})});var o=assignBoContext.boObj.allBOInfo.unassignedBoUsers;e=_.concat(e,o);var t=[],s=invokeBoWinFunc(function(){return this.bo.attendeeAssignedInBO()},[]),a=r(assignBoContext.roomId);if(_.forEach(e,function(n){var e=n.userID.toString(),o=-1!==$.inArray(e,s),i=-1!==$.inArray(e,a);o&&!i||t.push({userID:n.userID,userGUID:n.userGUID,userDisplayName:n.userDisplayName})}),$("#window-assignBo .attendees li").remove(),0!==t.length){$("#window-assignBo .info").addClass("forceHide"),$("#window-assignBo .attendees").removeClass("forceHide");var i=$("<div>");$.each(t,function(n,e){assignBoContext.template.clone().attr({userid:e.userID,userguid:e.userGUID}).find("input").attr({id:"b_"+n,checked:d(e.userID)}).end().find("label").text(e.userDisplayName).attr({for:"b_"+n}).end().appendTo(i)}),$("#window-assignBo ul").append(i.html())}else $("#window-assignBo .attendees").addClass("forceHide"),$("#window-assignBo .info").removeClass("forceHide")}()}function r(){return invokeBoWinFunc(function(){return this.bo.getAttendeeIdsByRoomId(assignBoContext.roomId)},[])}function d(n){return invokeBoWinFunc(function(n){return this.bo.attendeeAssigned(n,assignBoContext.roomId)},[n])}return{initAssignBoWindow:function(n,e){constAssignBoWinTemplate=$("#window-assignBo #template").clone(),assignBoContext={meeting:mainAppHtmlWindow.inmeeting,boObj:mainAppHtmlWindow.inmeeting.boObj,attendees:n,roomId:e,template:constAssignBoWinTemplate.clone().removeAttr("id").removeClass("forceHide")},i(),o()},renderWin:i,bindEvts:o,renderUnassignedAttendees:function(){var n=assignBoContext.boObj.allBOInfo.unassignedBoUsers,o=$("<div>");$.each(n,function(n,e){assignBoContext.template.clone().attr({userid:e.userID,userguid:e.userGUID}).find("input").attr({id:"b_"+n,checked:d(e.userID)}).end().find("label").text(e.userDisplayName).attr({for:"b_"+n}).end().appendTo(o)}),$("#window-assignBo ul").append(o.html())}}}();