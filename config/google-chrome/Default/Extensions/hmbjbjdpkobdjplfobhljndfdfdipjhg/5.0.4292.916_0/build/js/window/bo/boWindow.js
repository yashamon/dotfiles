"use strict";var bo=function(){var u=void 0;function t(){u||(u={meeting:mainAppHtmlWindow.inmeeting,boObj:mainAppHtmlWindow.inmeeting.boObj,intervalID:null,roomNum:mainAppHtmlWindow.inmeeting.boObj.roomNum,cloneNotStartTemp:$("#window-bo #bor_notstarted_temp").clone().removeAttr("id").removeClass("forceHide"),cloneInprogressTemp:$("#window-bo #bor_inprogress_temp").clone().removeAttr("id").removeClass("forceHide"),cloneUnassignTemp:$("#window-bo #bor_unassign_temp").clone().attr({id:"r_0"}).removeClass("forceHide"),cloneNotStartBtns:$("#window-bo #not_started").clone().removeClass("forceHide"),cloneInprogressBtns:$("#window-bo #in_progress").clone().removeClass("forceHide"),cloneBottomInfoJoin:$("#window-bo #bottom_info_join").clone().removeClass("forceHide"),cloneBottomInfoNotJoin:$("#window-bo #bottom_info_notjoin").clone().removeClass("forceHide")}),closeBoWins("boWin"),$("#window-bo #bor_notstarted_temp, #bor_inprogress_temp, #bor_unassign_temp, #in_progress, #bottom_info_join, #not_started, #in_progress, #bottom_info_notjoin").remove(),o(),$("#window-bo #bor_rooms").empty()}function o(){$("#window-bo .window-close").click(function(){clearInterval(u.intervalID),X(),closeBoWins()}),escEvt("#window-bo",function(){clearInterval(u.intervalID),X(),closeBoWins()}),function(){$("#window-bo #bor_rooms").unbind("click").click(function(){var o=$("#window-bo .bor-input").addClass("forceHide").parent("h3");hideAllBOWinExceptMainBoWin(),v(!1),w(o,!1)}),(mainAppChromeWindow.isFullscreen()||mainAppHtmlWindow.backgroundWindow.isKioskApp())&&$("#window-bo .panel-head").mousedown(function(){hideAllBOWinExceptMainBoWin()});mainAppHtmlWindow.winMgr.getWinByWinId("boWin")&&mainAppHtmlWindow.winMgr.getWinByWinId("boWin").onBoundsChanged.addListener(function(){hideAllBOWinExceptMainBoWin()})}(),T(u.cloneNotStartTemp),y(u.cloneNotStartTemp),T(u.cloneInprogressTemp),y(u.cloneInprogressTemp),T(u.cloneUnassignTemp),y(u.cloneUnassignTemp),u.cloneNotStartBtns.find(".bor-recreate").off("click").on("click",function(o){if(q){q=!1;var n=g(o);(function(o){closeBoWins("boWin",!0);var n=mainAppHtmlWindow.winMgr.getWinByWinId("createBoWin");n&&!1===i?(n.hide(),i=!0):n&&!0===i?(m(n,390,230,o.left,o.top),i=!1):mainAppChromeWindow.isFullscreen()||mainAppHtmlWindow.backgroundWindow.isKioskApp()?(mainAppHtmlWindow.createBo.showCreateBo(),mainAppHtmlWindow.createBo.bindRecallAllRoomsEvt(),mainAppHtmlWindow.createBo.recreateAllRooms(),$("#window-createBo").css({left:o.left+215,top:o.top+100,height:230})):mainAppHtmlWindow.winMgr.createWindow("createBoWin","build/window/bo/createBoWindow.html",{width:390,height:230,left:o.left,top:o.top},function(o){o.contentWindow.createBo.initCreateBoWindow(),o.contentWindow.createBo.bindRecallAllRoomsEvt(),o.contentWindow.createBo.recreateAllRooms()})})(n={left:n.left-215,top:n.top-235}),setTimeout(function(){q=!0},500)}}),P(),u.cloneNotStartBtns.find(".bor-open-rooms").off("click").on("click",function(){Y()}),u.cloneInprogressBtns.find(".bor-close-all").off("click").on("click",function(){u.meeting.stopBO(),u.meeting.updateBoBadge(0),u.boObj.needUpdateBOWinUI=!0,uo("close"),so()}),u.cloneInprogressBtns.find(".bor-broadcast").off("click").on("click",function(o){if(to){to=!1;var n=g(o);(function(o){closeBoWins("boWin",!0);var n=mainAppHtmlWindow.winMgr.getWinByWinId("broadcastBoWin");n&&!1===s?(n.hide(),s=!0):n&&!0===s?(n.contentWindow.broadcast.clearTextArea(),m(n,350,152,o.left,o.top),s=!1):mainAppChromeWindow.isFullscreen()||mainAppHtmlWindow.backgroundWindow.isKioskApp()?(mainAppHtmlWindow.broadcast.clearTextArea(),$("#window-broadcast").css({left:o.left,top:o.top,width:350,height:152}),$("#window-broadcast").hasClass("hideMe")?$("#window-broadcast").removeClass("hideMe"):$("#window-broadcast").addClass("hideMe"),mainAppHtmlWindow.broadcast.initBroadCastBoWindow()):(mainAppHtmlWindow.winMgr.createWindow("broadcastBoWin","build/window/bo/broadcastBoWindow.html",{width:350,height:152,left:o.left,top:o.top},function(o){o.contentWindow.broadcast.initBroadCastBoWindow()}),s=!1)})(n={left:n.left-200,top:n.top-165}),setTimeout(function(){to=!0},500)}}),u.cloneUnassignTemp.find("li").hover(function(){$(this).find(".bor-move-to").removeClass("forceHide")},function(){$(this).find(".bor-move-to").addClass("forceHide")}),u.cloneBottomInfoJoin.find(".bor-return-main-btn").click(function(){u.meeting.leaveBO(),closeBoWins()})}function n(){$("#window-bo").append(u.cloneNotStartBtns),Q()}function r(){$("#window-bo").append(u.cloneInprogressBtns)}function e(){u.boObj.autoAssign?function(){for(var o,n,e=_.sortBy(u.boObj.attendees,[function(o){return o.userDisplayName}]),i=(a=void 0,s=void 0,l=void 0,m=void 0,c=void 0,a=u.boObj.attendees.length,s=parseInt(a),l=parseInt(u.roomNum),m=s%l,c=s/l,0!==m?[Math.floor(c),m]:[c,0]),t=i[0],r=i[1],d=0;d<u.roomNum;d++)o=k(),n=R(o,e,t);var a,s,l,m,c;r&&(p=n,$.each(p,function(o,n){var e="r_"+(o+1),i=$("#window-bo #"+e).find(".bor-title-oper"),t=parseInt(i.text());i.text(t+1),R(e,p,1)}));var p}():function(){for(var o=0;o<u.roomNum;o++)k()}(),n()}function m(o,n,e,i,t){o.outerBounds.setSize(n,e),o.outerBounds.setPosition(i,t),o.show(),o.focus()}var d=!1,a=!1,c=!1,l=!1,i=!1,s=!1,p=!1;function f(o){var n=$(o.target).parent("a");n.find("i").hasClass("bor-expand-arrow")?(n.find("i").removeClass("bor-expand-arrow").addClass("bor-collapse-arrow"),n.parentsUntil("div").siblings("ul").addClass("forceHide")):(n.find("i").removeClass("bor-collapse-arrow").addClass("bor-expand-arrow"),n.parentsUntil("div").siblings("ul").removeClass("forceHide"))}function w(o,n){n?o.find(".bor-rename").addClass("forceHide").end().find(".bor-del").addClass("forceHide").end().find(".bor-title-oper").addClass("forceHide"):o.find(".bor-title-oper").removeClass("forceHide")}function b(o){var e=$(o.target).parent("h3"),n=e.find(".bor-title").text();hideAllBOWinExceptMainBoWin(),e.find(".bor-input").val(n).removeClass("forceHide").on("click",function(o){o.stopPropagation()}).on("change",function(){var o=$(this),n=$.trim(o.val());""!==n&&e.find(".bor-title").text(n),o.addClass("forceHide"),v(!1),w(e,!1)}),v(!0),w(e,!0)}function g(o){var n=0,e=0;if(mainAppHtmlWindow.winMgr.getWinByWinId("boWin")){var i=mainAppHtmlWindow.winMgr.getWinByWinId("boWin").outerBounds,t=Math.round(i.left),r=Math.round(i.top),d=$(o.target).offset();n=t+Math.round(d.left)+100,e=r+Math.round(d.top)}else n=Math.round($(o.target).offset().left)+100,e=Math.round($(o.target).offset().top);return{left:n,top:e}}function W(o){var n=$(o.target).parents(".bor-sec").attr("id"),e=g(o);!function(o,n){closeBoWins("boWin",!0);var e=0,i=0,t=mainAppHtmlWindow.winMgr.getWinByWinId("delBoWin");if(t&&B===n&&!1===d)t.hide(),d=!0;else if(t)t.hide(),t.contentWindow.delBoContext={meeting:mainAppHtmlWindow.inmeeting,roomId:n},t.contentWindow.delBo.renderWin(),t.contentWindow.delBo.bindEvts(),e=t.contentWindow.document.documentElement.offsetWidth,i=t.contentWindow.document.documentElement.offsetHeight,m(t,e,i,o.left,o.top),d=!1;else if(mainAppChromeWindow.isFullscreen()||mainAppHtmlWindow.backgroundWindow.isKioskApp()){var r=$("#window-delBo");r.hasClass("hideMe")&&(r.removeClass("hideMe"),r.css({left:o.left,top:o.top}),mainAppHtmlWindow.delBo.initDelBoWindow(n))}else mainAppHtmlWindow.winMgr.createWindow("delBoWin",encodeURI("build/window/bo/delBoWindow.html"),{width:e,height:i,left:o.left,top:o.top},function(o){o.contentWindow.delBo.initDelBoWindow(n),o.outerBounds.width=o.contentWindow.document.documentElement.offsetWidth,o.outerBounds.height=o.contentWindow.document.documentElement.offsetHeight,i=o.outerBounds.width,e=o.outerBounds.height});B=n}({left:e.left,top:e.top},n)}function h(o){mainAppHtmlWindow.winMgr.getWinByWinId("assignBoWin");var n=g(o),e={type:null,roomId:$(o.target).parents(".bor-sec").attr("id")};!function(o,n){closeBoWins("boWin",!0);var e=mainAppHtmlWindow.winMgr.getWinByWinId("assignBoWin");if(e&&I===n.roomId&&!1===a)e.hide(),a=!0;else{var i=function(o){var n=mainAppHtmlWindow.inmeeting.getAttendeesFromBoItems(),e=[];_.forEach(n,function(o){e.push({userID:o.userID,userGUID:o.userGUID,userDisplayName:o.userDisplayName})});var i=u.boObj.allBOInfo.unassignedBoUsers;e=_.concat(e,i);var t=[],r=J(),d=K(o.roomId);return _.forEach(e,function(o){var n=o.userID.toString(),e=-1!==$.inArray(n,r),i=-1!==$.inArray(n,d);e&&!i||t.push({userID:o.userID,userGUID:o.userGUID,userDisplayName:o.userDisplayName})}),t}(n),t=70;0!==i.length&&(t=330<(t=33*i.length)?330:t),e?(e.hide(),e.contentWindow.assignBoContext={meeting:mainAppHtmlWindow.inmeeting,boObj:mainAppHtmlWindow.inmeeting.boObj,attendees:i,roomId:n.roomId,template:e.contentWindow.constAssignBoWinTemplate.clone().removeAttr("id").removeClass("forceHide")},e.contentWindow.assignBo.renderWin(),e.contentWindow.assignBo.bindEvts(),m(e,215,t,o.left,o.top),a=!1):mainAppChromeWindow.isFullscreen()||mainAppHtmlWindow.backgroundWindow.isKioskApp()?($("#window-assignBo").css({left:o.left,top:o.top,width:215,height:t}),$("#window-assignBo").removeClass("hideMe"),mainAppHtmlWindow.assignBo.initAssignBoWindow(void 0,n.roomId)):mainAppHtmlWindow.winMgr.createWindow("assignBoWin","build/window/bo/assignBoWindow.html",{width:215,height:t,left:o.left,top:o.top},function(o){o.contentWindow.assignBo.initAssignBoWindow(void 0,n.roomId)})}I=n.roomId}({left:n.left-20,top:n.top},e)}function v(o){o?$("#window-bo h3").unbind("mouseenter mouseleave"):$("#window-bo h3").hover(function(){x($(this))},function(){O($(this))})}var B,I,A,H,C=!0;function x(o){o.find(".bor-rename").removeClass("forceHide").end().find(".bor-del").removeClass("forceHide").end().off("click").on("click",function(o){o.stopPropagation();try{if(!C)return;C=!1,$(o.target).hasClass("bor-rename")?M(o,"bor-rename",b):$(o.target).hasClass("bor-del")?M(o,"bor-del",W):$(o.target).hasClass("bor-red")?M(o,"bor-red",mo):$(o.target).hasClass("bor-title-oper")?M(o,"bor-title-oper",u.meeting.isInprogress()?ao:u.meeting.isNew()||u.meeting.isEnded()?h:void 0):$(o.target).hasClass("bor-title")&&M(o,"bor-title",f),$(this).find("i").hasClass("bor-expand-arrow")?M(o,"bor-expand-arrow",f):M(o,"bor-collapse-arrow",f),setTimeout(function(){C=!0},500)}catch(o){}})}function O(o){o.find(".bor-rename").addClass("forceHide").end().find(".bor-del").addClass("forceHide").end().off("click")}function T(o){o.find("h3").hover(function(){x($(this))},function(){O($(this))})}function D(o){var n,e=o.parents(".bor-sec").attr("id");(n=z(e),!!_.find(n,function(o){return 0!==$("#window-bo #"+o.id).find("li").length}))?o.find(".bor-exchange").removeClass("forceHide"):o.find(".bor-exchange").addClass("forceHide").off("click")}function k(){var o=u.cloneNotStartTemp.clone(!0),n=$("#window-bo #bor_rooms div").last().attr("id"),e=n?parseInt(n.split("r_")[1])+1:1,i="r_"+e;return o.attr({id:i}).find(".bor-title").text("Breakout Rooms "+e).end().find("ul").empty().end().removeClass("forceHide").appendTo("#bor_rooms"),i}function N(o,n){var e=u.cloneNotStartTemp.find("li").clone(!0).attr({userid:n.userID,userguid:n.userGUID});e.find("#user_name").removeAttr("id").text(n.userDisplayName),$("#window-bo #"+o).find("ul").append(e)}function j(o){var n;o.find(".bor-exchange").removeClass("forceHide").end().off("click").on("click",function(o){M(o,"bor-exchange",U),M(o,"bor-move-to",E)}),n=o,1<u.roomNum?n.find(".bor-move-to").removeClass("forceHide"):n.find(".bor-move-to").addClass("forceHide").off("click"),D(o)}function y(o){o.find("li").hover(function(){j($(this))},function(){var o=$(this);o.find(".bor-exchange").addClass("forceHide").end().find(".bor-move-to").addClass("forceHide").end().off("click")})}function M(o,n,e){e&&($(o.target).hasClass(n)&&(e.apply(null,arguments),o.stopPropagation()))}function U(o){var n=$(o.target),e=g(o),i=n.parents(".bor-sec").attr("id"),t=n.parent("li").attr("userid"),r=z(i),d=r.length,a={roomId:i,attendeeId:t};if($.each(r,function(o,n){d+=n.attendees.length}),d){var s=30*d+6;(function(o,n,e){closeBoWins("boWin",!0);var i=mainAppHtmlWindow.winMgr.getWinByWinId("exchangeBoWin");if(i&&H===e.attendeeId&&!1===l)i.hide(),l=!0;else{if(i)i.hide(),i.contentWindow.exchangeBoContext={meeting:mainAppHtmlWindow.inmeeting,roomId:e.roomId,attendeeId:e.attendeeId,temp:i.contentWindow.constExchangeBoWinTemplate.clone()},i.contentWindow.exchangeBo.bindEvts(),i.contentWindow.exchangeBo.renderWin(),m(i,t,o,n.left,n.top),l=!1;else if(mainAppChromeWindow.isFullscreen()||mainAppHtmlWindow.backgroundWindow.isKioskApp())t=215,$("#window-exchangeBo").css({left:n.left,top:n.top,width:t,height:o}),mainAppHtmlWindow.exchangeBo.initExchangeBoWindow(e.roomId,e.attendeeId),$("#window-exchangeBo").removeClass("hideMe");else{var t=215;mainAppHtmlWindow.winMgr.createWindow("exchangeBoWin","build/window/bo/exchangeBoWindow.html",{width:t,height:o,left:n.left,top:n.top},function(o){o.contentWindow.exchangeBo.initExchangeBoWindow(e.roomId,e.attendeeId)})}H=e.attendeeId}})(s=300<s?300:s,{left:e.left-20,top:e.top},a)}}function E(o){var n=$(o.target),e=g(o),i=n.parents(".bor-sec").attr("id"),t=n.parent("li"),r=t.attr("userid"),d=t.attr("userguid"),a=z(i).length,s={roomId:i||"r_0",userid:r,userguid:d};if(a){var l=30*a;(function(o,n,e){closeBoWins("boWin",!0);var i=mainAppHtmlWindow.winMgr.getWinByWinId("moveToBoWin");if(i&&A===e.userid&&!1===c)i.hide(),c=!0;else if(i)i.hide(),i.contentWindow.moveToBoContext={meeting:mainAppHtmlWindow.inmeeting,boObj:mainAppHtmlWindow.inmeeting.boObj,roomId:e.roomId,userid:e.userid,userguid:e.userguid,roomTemp:i.contentWindow.constMoveToBoWinTemplate.clone().removeAttr("id")},i.contentWindow.moveToBo.renderWin(),i.contentWindow.moveToBo.bindEvts(),m(i,t,o,n.left,n.top),c=!1;else if(mainAppChromeWindow.isFullscreen()||mainAppHtmlWindow.backgroundWindow.isKioskApp())t=215,$("#window-moveToBo").css({left:n.left,top:n.top,width:t,height:o}),mainAppHtmlWindow.moveToBo.initMoveToBoWindow(e.roomId,e.userid,e.userguid),$("#window-moveToBo").removeClass("hideMe");else{var t=215;mainAppHtmlWindow.winMgr.createWindow("moveToBoWin","build/window/bo/moveToBoWindow.html",{width:t,height:o,left:n.left,top:n.top},function(o){o.contentWindow.moveToBo.initMoveToBoWindow(e.roomId,e.userid,e.userguid)})}A=e.userid})(l=300<l?300:l,{left:e.left-20,top:e.top},s)}}function S(o,n){var e=$("#window-bo #"+o).find("li").length,i=void 0===n?"Assign":"0";$("#window-bo #"+o).find(".bor-title-oper").text(0<e?e:i)}function R(o,n,e){for(var i=0;i<e;i++)N(o,n.shift());return $("#window-bo #"+o).find(".bor-title-oper").text(0<e?e:"Assign"),n}function P(){u.cloneNotStartBtns.find(".bor-add-room").off("click").on("click",function(){var o;hideAllBOWinExceptMainBoWin(),k(),V(!0),o=$("#window-bo #bor_rooms").find(".bor-sec").length,(mainAppHtmlWindow.g.getMeetingStatusObj().maxBOCount||50)<=o&&$("#window-bo .bor-add-room").removeClass("bor-add-room").addClass("bor-add-room-disable").attr({tabindex:-1}).off("click")})}function G(n){var o=_.find(u.boObj.attendees,function(o){return n===o.userID.toString()});return u.boObj.unassignAttendees.push(o),o}function F(o,n){return 0!==$("#window-bo li[userid="+o+"]").length}function J(){var o=$("#window-bo li[userid]"),n=[];return _.forEach(o,function(o){n=_.concat(n,$(o).attr("userid"))}),n}function K(o){var n=[];return $("#window-bo #"+o).find("li").each(function(){n.push($(this).attr("userid"))}),n}function L(){var t=[];return $("#window-bo .bor-sec").each(function(){var o,i,n=$(this).attr("id"),e={id:n,bid:$(this).attr("bid"),meetingtoken:$(this).attr("meetingtoken"),roomName:$(this).find(".bor-title").text(),attendees:(o=n,i=[],$("#window-bo #"+o).find("li").each(function(){var o=$(this).attr("userid"),n=$(this).attr("userguid"),e=$(this).find("span").text();i.push({userID:o,userGUID:n,userDisplayName:e})}),i)};t.push(e)}),t}function z(n){var o=L();return _.filter(o,function(o){return o.id!==n})}function V(o){o?++u.roomNum:--u.roomNum}var q=!0;function Q(){var o=!!$("#window-bo .bor-sec").find("li").length,n=!!$("#window-bo .bor-open-rooms").length;(o||n)&&(o&&n||(o&&!n&&$("#window-bo .bor-open-disable").removeClass("bor-open-disable").addClass("bor-open-rooms").removeAttr("tabindex").off("click").on("click",function(){Y()}),!o&&n&&$("#window-bo .bor-open-rooms").removeClass("bor-open-rooms").addClass("bor-open-disable").off("click").attr({tabindex:-1})))}function X(){var o=L();return u.boObj.boRooms=o}function Y(){var t,o,n=(t=[],o=X(),$.each(o,function(o,n){var e,i=[];$.each(n.attendees,function(o,n){i.push(n.userGUID)}),e={BOName:n.roomName,userGUIDList:i},t.push(e)}),t);u.boObj.needUpdateBOWinUI=!0,u.meeting.createBO(n),uo("open")}function Z(o,n){var e,i=o.find(".bor-join").clone(!0),t=o.find(".bor-notjoin").clone(!0);return n.BOUserStatus?"1"===n.BOUserStatus.toString()?e=t:"2"===n.BOUserStatus.toString()&&(e=i):e=t,e}function oo(){var e,i=u.cloneUnassignTemp.clone(!0),o=u.boObj.allBOInfo.unassignedBoUsers;if(o.length){i.find(".bor-badge").text(o.length);var n=u.cloneUnassignTemp.clone(!0);e=n.find("ul").empty(),_.forEach(o,function(o){var n=Z(i,o);n&&(n.attr({userid:o.userID,userguid:o.userGUID}).find("#user_name").text(o.userDisplayName).removeAttr("id"),n.appendTo(e))}),$("#window-bo #bor_rooms").prepend(n),u.meeting.updateBoBadge(o.length)}else u.meeting.updateBoBadge(0)}function no(){var o=u.meeting.isInprogress()?" - In Progress":" - Not Started";$("#window-bo #bor_head_text").text(o)}function eo(){var o;clearInterval(u.intervalID),no(),oo(),o=u.boObj.allBOInfo.boItems,u.roomNum=o.length,$.each(o,function(o,n){var e=u.cloneInprogressTemp.clone(!0);co(e.attr({id:"r_"+(o+1),bid:n.BID,meetingtoken:n.meetingToken}).find(".bor-title").text(n.meetingName).end().find("ul").empty(),n),$("#window-bo #bor_rooms").append(e)}),r()}var io,to=!0;function ro(o,n){closeBoWins("boWin",!0);var e=mainAppHtmlWindow.winMgr.getWinByWinId("joinleaveBoPromptWin");if(e&&io===n.bid&&!1===p)e.hide(),p=!0;else if(e)e.hide(),e.contentWindow.joinLeaveBoPromptContext={meeting:mainAppHtmlWindow.inmeeting,bid:n.bid,roomName:n.roomName,type:n.type},e.contentWindow.joinLeaveBoPrompt.renderWin(),e.contentWindow.joinLeaveBoPrompt.bindEvts(),m(e,i,t,o.left-20,o.top),p=!1;else if(mainAppChromeWindow.isFullscreen()||mainAppHtmlWindow.backgroundWindow.isKioskApp())i=220,t=80,$("#window-joinleaveBoPrompt").css({left:o.left-20,top:o.top,width:i,height:t}),$("#window-joinleaveBoPrompt").removeClass("hideMe"),mainAppHtmlWindow.joinLeaveBoPrompt.initJoinLeaveBoPromptWindow(n.bid,n.roomName,n.type);else{var i=220,t=80;mainAppHtmlWindow.winMgr.createWindow("joinleaveBoPromptWin",encodeURI("build/window/bo/joinleaveBoPromptWindow.html"),{width:i,height:t,left:o.left-20,top:o.top},function(o){o.contentWindow.joinLeaveBoPrompt.initJoinLeaveBoPromptWindow(n.bid,n.roomName,n.type)})}io=n.bid}function ao(o){var n=$(o.target).parents(".bor-sec"),e=n.attr("bid"),i=n.find(".bor-title").text();ro(g(o),{bid:e,roomName:i,type:"j"})}function so(){var o=mainAppHtmlWindow.g.getMeetingStatusObj().inBO&&u.boObj.boHost.gotHost?"hostJoin":$("#window-bo .bor-join").length?"attendeeJoin":"none",n="hostJoin"===o?u.cloneBottomInfoJoin:"attendeeJoin"===o?u.cloneBottomInfoNotJoin:null;n&&($("#window-bo #in_progress").remove(),$("#window-bo").append(n),$("#window-bo .bor-sec").each(function(){S($(this).attr("id"),0)}),$("#window-bo .bor-title-oper").addClass("bor-disable"),$("#window-bo h3, li, #bor_rooms").off(),$("#window-bo h3").on("click",function(o){M(o,"bor-title",f),$(this).find("i").hasClass("bor-expand-arrow")?M(o,"bor-expand-arrow",f):M(o,"bor-collapse-arrow",f)}))}function lo(o){$('#window-bo div[bid="'+o+'"]').find(".bor-title-oper").addClass("bor-red").text("Leave")}function mo(o){var n=$(o.target).parents(".bor-sec"),e=n.attr("bid"),i=n.find(".bor-title").text();ro(g(o),{bid:e,roomName:i,type:"l"})}function co(e,o){_.forEach(o.BOUserItems,function(o){var n=Z(u.cloneInprogressTemp,o);n&&n.attr({userid:o.userID,userguid:o.userGUID}).find("#user_name").text(o.userDisplayName).removeAttr("id").end().appendTo(e)})}function po(){u.intervalID=setInterval(function(){var o,n,i,e,t,r,d=_.concat(mainAppHtmlWindow.inmeeting.getAttendeesFromBoItems(),u.boObj.allBOInfo.unassignedBoUsers),a=u.boObj.attendees,s=u.boObj.unassignAttendees;n=a,i=d,e=_.concat(n),_.remove(e,function(n){var o,e;_.find(i,function(o){return n.userID===o.userID})||(e=(o=$("#window-bo li[userid="+n.userID+"]")).parents(".bor-sec").attr("id"),o.remove(),S(e))}),o=_.differenceBy(d,a,"userID"),u.boObj.attendees=d,u.boObj.unassignAttendees=_.concat(s,o),t=u.boObj.attendees,r=u.boObj.unassignAttendees,_.remove(r,function(n){return!_.find(t,function(o){return o.userID===n.userID})})},1e3)}function uo(n){var o=Math.round(screen.availWidth-350-10),e=mainAppHtmlWindow.winMgr.getWinByWinId("boTooltipWin1"),i=e?"2":"1",t=e?120:50;mainAppChromeWindow.isFullscreen()||mainAppHtmlWindow.backgroundWindow.isKioskApp()?($("#window-boTooltip").css({left:o,top:t,width:350,height:67}),mainAppHtmlWindow.boTooltip.initBoTooltipWindow(),"open"===n?mainAppHtmlWindow.boTooltip.showOpenAllInfo():mainAppHtmlWindow.boTooltip.showCloseAllInfo(),$("#window-boTooltip").removeClass("hideMe")):mainAppHtmlWindow.winMgr.createWindow("boTooltipWin"+i,"build/window/bo/boTooltipWindow.html",{width:350,height:67,left:o,top:t},function(o){o.contentWindow.boTooltip.initBoTooltipWindow(),"open"===n?o.contentWindow.boTooltip.showOpenAllInfo():o.contentWindow.boTooltip.showCloseAllInfo()})}return{assignAttendeeToRoom:function(o,n){var e,i=(e=o,_.remove(u.boObj.unassignAttendees,function(o){return e===o.userID.toString()})[0]);F(o)||(N(n,i),(u.meeting.isNew()||u.meeting.isEnded())&&S(n))},attendeeAssigned:F,attendeeAssignedInBO:J,execute:function(){t(),e(),po()},executeRecover:function(){var o;t(),o=u.boObj.boRooms,$("#window-bo #bor_rooms").empty(),_.forEach(o,function(o){var n=u.cloneNotStartTemp.clone(!0).attr({id:o.id,bid:o.bid,meetingtoken:o.meetingtoken}).find(".bor-title").text(o.roomName).end(),e=n.find("li").clone(!0),i=n.find("ul").empty();_.forEach(o.attendees,function(o){e.attr({userid:o.userID,userguid:o.userGUID}).find("#user_name").removeAttr("id").text(o.userDisplayName).end().appendTo(i)}),n.appendTo("#bor_rooms"),S(o.id)}),n(),Q(),po()},executeAttendeeViewRoom:function(){var o;t(),o=u.boObj.allBOInfo.boItems,u.roomNum=o.length,$("#window-bo #bor_rooms").empty(),$.each(o,function(o,n){var e=u.cloneInprogressTemp.clone(!0),i=e.attr({id:"r_"+(o+1),bid:n.BID,meetingtoken:n.meetingToken}).find(".bor-title").text(n.meetingName).end().find("ul").empty();_.forEach(n.BOUserItems,function(o){var n=Z(u.cloneInprogressTemp,o);n&&n.attr({userid:o.userID,userguid:o.userGUID}).find(".bor-move-to, .bor-exchange").remove().end().find("#user_name").text(o.userDisplayName).removeAttr("id").end().appendTo(i)}),e.appendTo("#bor_rooms")}),o.length&&(u.roomNum=o.length,mainAppHtmlWindow.g.getMeetingStatusObj().inBO&&mainAppHtmlWindow.g.getMeetingStatusObj().isBackToMainSessionEnabled&&lo(mainAppHtmlWindow.g.getMeetingStatusObj().BID)),no()},executeEnded:function(){var o;t(),o=u.boObj.allBOInfo.boItems,u.roomNum=o.length,no(),$.each(o,function(o,n){var e,i,t,r=u.cloneNotStartTemp.clone(!0),d="r_"+(o+1),a=r.attr({id:d,bid:n.BID,meetingtoken:n.meetingToken}).find(".bor-title").text(n.meetingName).end().find("ul").empty();e=n,i=a,t=u.cloneNotStartTemp.find("li").clone(!0),_.forEach(e.BOUserItems,function(o){var n=t.clone(!0);n.attr({userid:o.userID,userguid:o.userGUID}).find("#user_name").text(o.userDisplayName).removeAttr("id").end().appendTo(i)}),u.roomCount=o+1,$("#window-bo #bor_rooms").append(r),S(d)}),n(),Q(),po()},executeInBOMeeting:function(){var o,i,n,e;t(),clearInterval(u.intervalID),no(),oo(),n=u.boObj.allBOInfo.boItems,e=u.boObj.boHost.hostGUID,o=_.orderBy(n,function(o){var n=_.find(o.BOUserItems,function(o){return e===o.userGUID});return!!n},"desc"),i=[],$.each(o,function(o,n){var e=u.cloneInprogressTemp.clone();i=_.concat(i,n.BOUserItems),co(e.attr({id:"r_"+(o+1),bid:n.BID,meetingtoken:n.meetingToken}).find(".bor-title").text(n.meetingName).end().find("ul").empty(),n),$("#window-bo #bor_rooms").append(e)}),o.length&&(u.roomNum=o.length,lo(o[0].BID)),r()},executeInprogress:function(){t(),eo()},executeStopping:function(){t(),eo(),so()},exchangeAttendeeToRoom:function(o,n,e,i){var t=$("#window-bo li[userid="+o+"]").clone(!0),r=$("#window-bo li[userid="+n+"]").clone(!0);$("#window-bo li[userid="+o+"]").remove(),$("#window-bo li[userid="+n+"]").remove(),$("#window-bo #"+e).find("ul").append(r),$("#window-bo #"+i).find("ul").append(t)},enableAddRoomBtn:function(){$("#window-bo .bor-add-room-disable").length&&($("#window-bo .bor-add-room-disable").removeClass("bor-add-room-disable").addClass("bor-add-room").removeAttr("tabindex"),P())},filterRoomsById:z,getRoomNameByRoomId:function(o){return $("#window-bo #"+o).find(".bor-title").text()},getAttendeeIdsByRoomId:K,moveAttendeeToRoom:function(o,n,e){var i=$("#window-bo li[userid="+o+"]"),t=i.clone(!0);i.remove(),$("#window-bo #"+e).find("ul").append(t),S(n),S(e)},updateRoomNum:V,updateOpenAllRoomsBtn:Q,resetAllBOWinHiddenFlag:function(o){p=s=i=l=c=a=d=!0},recreateBoWindow:function(){$("#window-bo .bor-sec").remove(),u.boObj=mainAppHtmlWindow.inmeeting.boObj,u.roomNum=mainAppHtmlWindow.inmeeting.boObj.roomNum,o(),e()},removeRoomByRoomId:function(o){$("#window-bo #"+o).find("li").each(function(){G($(this).attr("userid"))}),$("#window-bo #"+o).remove()},removeAttendee:function(o,n){G(o),$("#window-bo #"+n).find("li[userid="+o+"]").remove(),(u.meeting.isNew()||u.meeting.isEnded())&&S(n)},showBo:function(o){var n=mainAppHtmlWindow.winMgr.getWinByWinId("boWin");mainAppChromeWindow.isFullscreen()||mainAppHtmlWindow.backgroundWindow.isKioskApp()?(n&&n.close(),mainAppHtmlWindow.client.toggleDivWindow("window-bo"),"function"==typeof o&&o.call(null,mainAppChromeWindow)):n?n.focus():mainAppHtmlWindow.inmeeting.createBoWindow(o)},updateCountDown:function(o){$("#window-bo #sec").text(o)}}}();