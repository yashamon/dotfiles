"use strict";var toolbar=function(){var n={leftSection:{width:0},rightSection:{width:0},middle:{security:{name:"security",className:"security",width:0,visible:!1,precedence:10,isInMoreList:!1},participant:{name:"participant",className:"participant",width:0,visible:!0,precedence:9,isInMoreList:!1},qa:{name:"qa",className:"qa",width:0,visible:!1,precedence:8,isInMoreList:!1},poll:{name:"poll",className:"poll",width:0,visible:!1,precedence:7,isInMoreList:!1},shareContainer:{name:"shareContainer",className:"share-container",width:0,visible:!0,precedence:11,isInMoreList:!1},chat:{name:"chat",className:"chat",width:0,visible:!1,precedence:6,isInMoreList:!1},record:{name:"record",className:"record",width:0,visible:!1,precedence:5,isInMoreList:!1},recordContainer:{name:"recordContainer",className:"record-container",width:0,visible:!1,precedence:5,isInMoreList:!1},cc:{name:"cc",className:"close-caption",width:0,visible:!1,precedence:4,isInMoreList:!1},bo:{name:"bo",className:"bo",width:0,visible:!1,precedence:3,isInMoreList:!1},more:{name:"more",className:"more",width:0,visible:!1,precedence:12,isInMoreList:!1},askforhelp:{name:"askforhelp",className:"askForHelp",width:0,visible:!1,precedence:2,isInMoreList:!1}}},s=0,d=!1;function t(){d||(window.requestAnimationFrame(e),d=!0)}function e(){0==s&&(s=window.innerWidth);var e,o=[],i=[],r=0;for(var t in e=s-n.leftSection.width-n.rightSection.width,n.middle)n.middle[t].visible&&!n.middle[t].isInMoreList&&(o.push(n.middle[t]),r+=n.middle[t].width),n.middle[t].isInMoreList&&!n.middle[t].visible&&i.push(n.middle[t]);if(r<=e)for(i.sort(function(e,o){return o.precedence-e.precedence});i.length&&(r+=i[0].width)<=e;)n.middle[i[0].name].visible=!0,n.middle[i[0].name].isInMoreList=!1,o.push(i[0]),i.shift();else for(o.sort(function(e,o){return e.precedence-o.precedence});0<o.length&&(r-=o[0].width,$(".middle li."+o[0].className).addClass("forceHide"),n.middle[o[0].name].visible=!1,n.middle[o[0].name].isInMoreList=!0,i.push(o[0]),o.shift(),!(r<=e)););!function(e){$(".middle > ul > li").addClass("forceHide");for(;e.length;)$(".middle li."+e[0].className).removeClass("forceHide"),e.shift()}(o),function(e){if($(".webinar-more li:not(.alwaysInMorelist)").addClass("forceHide"),0==(e=e.filter(function(e){return"security"!=e.name})).length)0==$(".webinar-more li.alwaysInMorelist").length&&($(".middle li.more").addClass("forceHide"),n.middle.more.visible=!1,n.middle.more.isInMoreList=!1);else for($(".middle li.more").removeClass("forceHide"),n.middle.more.visible=!0,n.middle.more.isInMoreList=!1;e.length;)$(".webinar-more li."+e[0].className+"-more").removeClass("forceHide"),e.shift();$(".webinar-more ul").each(function(){$(this).find("li:not(.forceHide)").length?$(this).removeClass("forceHide"):$(this).addClass("forceHide")})}(i),d=!1}function o(){var e=$(".toolbar .middle > ul > li"),o=null,i="",r=$(".toolbar").css("display");"none"==r&&$(".toolbar").css("display","flex"),e.each(function(){o=$(this),i=o.data("name"),o.hasClass("forceHide")?(n.middle[i].width=o.removeClass("forceHide").width(),o.addClass("forceHide")):n.middle[i].width=o.width()}),n.leftSection.width=$(".toolbar .left").width(),n.rightSection.width=$(".toolbar .right").width(),"none"==r&&$(".toolbar").css("display","none"),t()}function i(){$(".toolbar").hide(),stopGetMicLevel(),m()}function r(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];e?$(document).off("mousemove",a).off("mouseleave",c).on("mousemove",a).on("mouseleave",c):($(document).off("mousemove",a),!o&&$(document).off("mouseleave",c))}function a(){client.autoShow(1),r(!1)}function c(){$(".audioSetting").hasClass("hideMe")&&$(".videoSetting").hasClass("hideMe")&&$(".webinar-more").hasClass("hideMe")&&client.autoShow(0)}function l(){$(".toolbar").stop(!0,!0)}function m(){$(".active-speaker").css("bottom","0px")}function u(){var e=f();$(".active-speaker").css("bottom",e+"px")}function f(e,o){var i=mainAppChromeWindow.innerBounds.height-30,r=$('[id^="activeSpeaker"]'),t=e||parseInt(r.css("height"));if(void 0===o&&!r.length)return 0;var n=i-(o=o||r.offset().top-30)-t-55;return 0<n?0:-n}return{isShow:function(){return"none"!==$(".toolbar").css("display")},show:function(){$(".toolbar").show(),startGetMicLevel(),u()},hide:i,fadeOut:function(){l(),$(".toolbar").fadeOut(200,function(){stopGetMicLevel(),m()})},fadeIn:function(){l(),u(),$(".toolbar").fadeIn(200,function(){startGetMicLevel()})},isForceHide:function(){return $(".toolbar").hasClass("forceHide")},forceHide:function(){i(),$(".toolbar").addClass("forceHide")},removeForceHide:function(){$(".toolbar").removeClass("forceHide")},resize:function(e){isNaN(e)||$(".toolbar, .leave-meeting-cancel-bar").css("width",e+"px")},mouseMoveBind:r,mouseEnterLeaveBind:function(){0<arguments.length&&void 0!==arguments[0]&&!arguments[0]?$(".toolbar,.turnpage-button,.statistics-info,.switch-view, .conf-encryption, .bandwidth-limit, .inmeeting-info, .screen-mode").unbind("mouseenter mouseleave"):$(".toolbar,.turnpage-button,.statistics-info,.switch-view, .conf-encryption, .bandwidth-limit, .inmeeting-info, .screen-mode").unbind("mouseenter mouseleave").mouseenter(function(){client.clearMouseMoveTimer()}).mouseleave(function(){client.registeMouseMoveTimer()})},stopAnimation:l,moveActiveSpeakerTooltipToBottom:m,shouldActiveSpeakerTooltipUp:f,moveActiveSpeakerTooltipUp:u,respondToWindowResize:function(e){joinmeeting.ifInMeeting()&&($(".webinar-more").addClass("hideMe"),0!=$(".viewport .toolbar").length&&s!==e.toolbarWidth&&(e.toolbarWidth<=380?$(".toolbar .right").addClass("forceHide"):$(".toolbar .right").removeClass("forceHide"),s=e.toolbarWidth,t()))},showToolbarIcon:function(e,o){if(o){if(n.middle[e].visible&&!n.middle[e].isInMoreList)return;if(!n.middle[e].visible&&n.middle[e].isInMoreList)return;n.middle[e].visible=!0}else{if(!n.middle[e].visible&&!n.middle[e].isInMoreList)return;n.middle[e].visible&&!n.middle[e].isInMoreList&&(n.middle[e].visible=!1),!n.middle[e].visible&&n.middle[e].isInMoreList&&(n.middle[e].isInMoreList=!1)}t()},elementMetrics:n,hideInviteInWebinar:function(){},calculateIconWidth:o,showLeaveMeetingBtn:function(){$(".toolbar .right .leaveMeeting").removeClass("forceHide"),o()},showLeaveBoBtn:function(){$(".toolbar .right .leaveBo").removeClass("forceHide"),o()},resetToolbar:function(){s=0,d=!1;var e=n.middle;for(var o in e)switch(e[o].width=0,e[o].isInMoreList=!1,o){case"share":case"participant":e[o].visible=!0;break;default:e[o].visible=!1}},showShareOptionArrow:function(){g.getMeetingStatusObj().isScreenShareDisabled||(g.getMeetingStatusObj().meetingIsViewOnly?toolbar.showToolbarIcon("shareContainer",!1):toolbar.showToolbarIcon("shareContainer",!0),myStatusObject.isHost||myStatusObject.isCoHost?$(".toolbar li.share-options-arrow").removeClass("forceHide"):$(".toolbar li.share-options-arrow").addClass("forceHide"),toolbar.calculateIconWidth())},checkShouldAutoShow:function(){mainAppHtmlWindow.localStorage.alwaysShowMeetingControls||(client.addAutoShowUI(),toolbar.show())}}}();function refreshAudioState(e){var o=mainAppHtmlWindow.myStatusObject;if(o&&!o.audioIsMuted){var i="img-unmute"+e;$(".muteImg-rate").removeClass().addClass("muteImg-rate").addClass(i)}}function isMicShow(){if("AUDIO_VOIP"!==mainAppHtmlWindow.myStatusObject.audioType)return!1;var e=mainAppHtmlWindow.winMgr.getWinByWinId("shareMainWindow");return toolbar.isShow()||e}function startGetMicLevel(){mainAppHtmlWindow.g.getMeetingStatusObj().meetingIsViewOnly||isMicShow()&&!mainAppHtmlWindow.myStatusObject.audioIsMuted&&mainAppHtmlWindow.common.postMessageToNaCl({type:"audio",command:"audio.startMicLevelNotify"})}function stopGetMicLevel(){isMicShow()||mainAppHtmlWindow.common.postMessageToNaCl({type:"audio",command:"audio.stopMicLevelNotify"})}function hideAudio(){$(".joinAudio-li").hide()}function showAudio(){$(".joinAudio-li").show()}function showMute(){$(".mute-li").removeClass("forceHide"),$(".muteArrow").removeClass("forceHide")}function hideMute(){$(".mute-li").addClass("forceHide"),$(".muteArrow").addClass("forceHide")}function hidePhone(){$(".phone-li").addClass("forceHide"),$(".phoneArrow").addClass("forceHide")}function showPhone(){$(".phone-li").removeClass("forceHide"),$(".phoneArrow").removeClass("forceHide")}function showPollingButtonInToolbar(e){e?($(".main-bar li.poll").removeClass("forceHide"),toolbar.showToolbarIcon("poll",!0)):($(".main-bar li.poll").addClass("forceHide"),toolbar.showToolbarIcon("poll",!1))}function refreshRecordingStatus(){if(void 0!==mainAppHtmlWindow){if(mainAppHtmlWindow.recordStatusObject.inRecording){var e="cloudrecording-img";isInsideMainAppWindow()||(e="cloudrecording16-img"),mainAppHtmlWindow.g.getMeetingStatusObj().canStartCMR&&mainAppHtmlWindow.recordStatusObject.isCMR?($(".common-recording").removeClass("recording-img").addClass(e),$("#recording span.text").addClass("cloud")):($(".common-recording").removeClass(e).addClass("recording-img"),$("#recording span.text").removeClass("cloud")),$(".common-recording").removeClass("forceHide"),$("#recording").removeClass("forceHide"),$("#recording .recording").removeClass("forceHide"),$("#recording .pausing").addClass("forceHide")}else mainAppHtmlWindow.g.getMeetingStatusObj().canStartCMR&&mainAppHtmlWindow.recordStatusObject.isCMRPaused?showRecordingPauseStatus(1):showRecordingPauseStatus(0);0==mainAppHtmlWindow.recordStatusObject.inRecording&&0==mainAppHtmlWindow.recordStatusObject.isCMR&&0==mainAppHtmlWindow.recordStatusObject.isCMRInConnecting&&0==mainAppHtmlWindow.recordStatusObject.isCMRInProgress&&0==mainAppHtmlWindow.recordStatusObject.isCMRPaused&&0==mainAppHtmlWindow.recordStatusObject.isLocalRecordingInProgress&&0==mainAppHtmlWindow.recordStatusObject.isRecordingInProgress&&(mainAppHtmlWindow.recordingNodeIDs="",mainAppHtmlWindow.client.refreshPlistRecord())}}function showRecordingPauseStatus(e){$(".common-recording").addClass("forceHide"),e?($("#recording").removeClass("forceHide"),$("#recording .recording").addClass("forceHide"),$("#recording .pausing").removeClass("forceHide")):($("#recording").addClass("forceHide"),$("#recording .recording").removeClass("forceHide"),$("#recording .pausing").addClass("forceHide"))}function refreshRecordButton(){var e=mainAppHtmlWindow.winMgr.getWinByWinId("shareMoreWindow");mainAppHtmlWindow.g.getMeetingStatusObj().canStartCMR&&!mainAppHtmlWindow.g.getMeetingStatusObj().isAutoCMRForbidManualStop?mainAppHtmlWindow.recordStatusObject.inRecording&&mainAppHtmlWindow.recordStatusObject.isCMRInProgress?(refreshRecordButtonByMeetingType("recording"),e&&refreshRecordButtonOfMoreWin("recording")):mainAppHtmlWindow.recordStatusObject.isCMRPaused?(refreshRecordButtonByMeetingType("pause"),e&&refreshRecordButtonOfMoreWin("pause")):0==mainAppHtmlWindow.recordStatusObject.inRecording&&0==mainAppHtmlWindow.recordStatusObject.isCMRInProgress&&0==mainAppHtmlWindow.recordStatusObject.isCMRPaused&&(refreshRecordButtonByMeetingType("init"),e&&refreshRecordButtonOfMoreWin("init")):(refreshRecordButtonByMeetingType("disable"),e&&refreshRecordButtonOfMoreWin("disable"))}function refreshRecordButtonByMeetingType(e){mainAppHtmlWindow.g.getMeetingStatusObj().isWebinar?refreshRecordButtonOfWebinar(e):refreshRecordButtonOfToolbar(e)}function refreshRecordButtonOfToolbar(e){"init"==e?(toolbar.showToolbarIcon("record",!0),toolbar.showToolbarIcon("recordContainer",!1),$("#btn-recording").removeClass("selected").parent().find("p").text("Start Recording"),refreshRecordingStatusButton(1)):"disable"==e?(toolbar.showToolbarIcon("record",!1),toolbar.showToolbarIcon("recordContainer",!1),$("#btn-recording").addClass("disabled")):"pause"==e?(toolbar.showToolbarIcon("record",!1),toolbar.showToolbarIcon("recordContainer",!0),refreshRecordingStatusButton(0)):"recording"==e&&(toolbar.showToolbarIcon("record",!1),toolbar.showToolbarIcon("recordContainer",!0),$("#btn-recording").addClass("selected").parent().find("p").text("Stop Recording"),refreshRecordingStatusButton(1))}function refreshRecordButtonOfWebinar(e){"init"==e?(toolbar.showToolbarIcon("record",!0),toolbar.showToolbarIcon("recordContainer",!1),refreshRecordingStatusButton(1)):"disable"==e?(toolbar.showToolbarIcon("record",!1),toolbar.showToolbarIcon("recordContainer",!1)):"pause"==e?(toolbar.showToolbarIcon("record",!1),toolbar.showToolbarIcon("recordContainer",!0),refreshRecordingStatusButton(0)):"recording"==e&&(toolbar.showToolbarIcon("record",!1),toolbar.showToolbarIcon("recordContainer",!0),refreshRecordingStatusButton(1))}function refreshRecordButtonOfMoreWin(e){"init"==e?($(".dl-record").removeClass("forceHide"),$("dd.record").removeClass("forceHide"),$("dd.recording-status").addClass("forceHide"),$("dd.stoprecord").addClass("forceHide")):"disable"==e?($("dd.record").addClass("forceHide"),$("dd.recording-status").addClass("forceHide"),$("dd.stoprecord").addClass("forceHide"),$(".dl-record").addClass("forceHide")):"pause"==e?($(".dl-record").removeClass("forceHide"),$("dd.record").addClass("forceHide"),$("dd.recording-status").removeClass("forceHide"),$("dd.stoprecord").removeClass("forceHide")):"recording"==e&&($(".dl-record").removeClass("forceHide"),$("dd.record").addClass("forceHide"),$("dd.recording-status").removeClass("forceHide"),$("dd.stoprecord").removeClass("forceHide"))}function refreshRecordingStatusButton(e){var o=mainAppHtmlWindow.winMgr.getWinByWinId("shareMoreWindow");e?($(".webinar-more .pauserecord-more span").text("Pause Recording"),$(".webinar-more .pauserecord-more").attr("data-name","pauserecord"),$("li.recording-status").removeClass("resumerecord").addClass("pauserecord"),$("li.recording-status").attr("data-name","pauserecord"),$("li.recording-status i").removeClass("img-resumerecord").addClass("img-pauserecord"),$(".recording-status-text").text("Pause/Stop"),o&&($("dd.recording-status span").text("Pause Recording"),$("dd.recording-status").attr("data-name","pauserecord"))):($(".webinar-more .pauserecord-more span").text("Resume Recording"),$(".webinar-more .pauserecord-more").attr("data-name","resumerecord"),$("li.recording-status").removeClass("pauserecord").addClass("resumerecord"),$("li.recording-status").attr("data-name","resumerecord"),$("li.recording-status i").removeClass("img-pauserecord").addClass("img-resumerecord"),$(".recording-status-text").text("Resume/Stop"),o&&($("dd.recording-status span").text("Resume Recording"),$("dd.recording-status").attr("data-name","resumerecord")))}function showRecording(){refreshRecordingStatus();var e=mainAppHtmlWindow.winMgr.getWinByWinId("shareMainWindow");null!==e&&e.contentWindow.refreshRecordingStatus()}window.eev&&window.eev.on(g.getConstants().SWITCH_TO_OUTSIDE_MEETING_REMOVE_TOOOLBAR_EVENT,function(){toolbar.mouseMoveBind(!1,!1),toolbar.mouseEnterLeaveBind(!1),client.clearMouseMoveTimer()});