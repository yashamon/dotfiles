"use strict";function handleMessage(e){try{switch(e.TYPE){case"CONF":handleMessageConf(e);break;case"AUDIO":handleMessageAudio(e);break;case"VIDEO":handleMessageVideo(e);break;case"DEVICE":handleMessageDevice(e);break;case"CHAT":handleMessageChat(e);break;case"CRASH":handleCrashMessage(e.detail);break;case"USER":handleMessageUser(e);break;case"TERM":"EXITAPP"===e.EVENT&&kiosk.closeApp();break;case"DATA":handleMessageData(e)}}catch(e){console.error(e)}}function handleMessageConf(t){switch(t.EVENT){case"hello":chrome.system.cpu.getInfo(function(e){machineInfo.archName=e.archName,machineInfo.modelName=e.modelName,videocontrol.decidePrefLevel(e.numOfProcessors,e.archName,e.modelName);var t=videocontrol.getResolution();common.postMessageToNaCl({command:"cpuInfo",coreNumber:e.numOfProcessors||1,archName:e.archName,modelName:e.modelName,features:e.features,prefLevel:videocontrol.getStaticPrefLevel(),cpuLevel:videocontrol.getMachineLevel(),isPoolPerfCPU:videocontrol.getIsPoolPerfCPU(),enableLowRenderRate:videocontrol.getEnableLowRenderRate()}),common.postMessageToNaCl({command:"resolutionInfo",width:t.width,height:t.height})}),chrome.system.memory.getInfo(function(e){common.postMessageToNaCl({command:"memoryInfo",capacity:e.capacity/1048576,availableCapacity:e.availableCapacity/1048576})}),commonModule.DisplaysMgr.getInstance().updatePrimaryWindowDisplayInfo(),startMonitorResource(),common.nativeReady=!0;break;case"OnUpdateFeedbackNum":inmeeting.setFeedbackNumbersObject(t.feedbackCount||{}),window.eev.emit(g.getConstants().FEEDBACK.FEEDBACK_NUMBER,t.feedbackCount||{});break;case"onUserJoin":if(e=getAttendeeObject(t.userId,!0))break;20<(u=C=t.userDisplayName).length&&(u=common.formatNameByLength(u,20)),40<(o=C).length&&(o=common.formatNameByLength(o,40)),attendeeList.push({id:t.userId,name:t.userDisplayName,shortName:u,longName:o,smallPicUrl:t.smallPicUrl,bigPicUrl:t.bigPicUrl,picBlobUrlSmall:null,isMyself:t.isMyself,isHost:t.isHost,isCoHost:t.isCoHost||t.isBOModerator,canBeSupportCoHost:t.canBeSupportCoHost,canRecord:t.canRecord,isTelephoneUser:t.isTelephoneUser,isH323User:t.isH323User,isOrgHost:t.isOrgHost,isOriHostorAltHost:t.isOriHostorAltHost,canBeHost:t.canBeHost,audioType:t.audioType,audioIsMuted:t.audioIsMuted,videoHasCamera:t.videoHasCamera,videoIsSending:t.videoIsSending,isRaiseHand:t.isRaiseHand,userFeedback:t.userFeedback,isInCMR:t.isInCMR,isInRecording:t.isInRecording,ClientOSSupportRecord:t.ClientOSSupportRecord,participantID:t.participantID,canActAsCCEditor:t.canActAsCCEditor,isViewOnlyUser:t.isViewOnlyUser,isViewOnlyUserCanTalk:t.isViewOnlyUserCanTalk,canIAdmitOthersWhenNoHost:t.canIAdmitOthersWhenNoHost,netQuality:"good",isUserNeedUnmuteAudioConsent:!0}),commonModule.rendererMgr.getInstance().onUserJoin({userId:t.userId,name:t.userDisplayName,shortName:u,longName:o,smallPicUrl:t.smallPicUrl,bigPicUrl:t.bigPicUrl,isMyself:t.isMyself,isTelephoneUser:t.isTelephoneUser,isH323User:t.isH323User,audioType:t.audioType,audioIsMuted:t.audioIsMuted,videoHasCamera:t.videoHasCamera,videoIsSending:t.videoIsSending,netQuality:"good"});var e=getAttendeeObject(t.userId,!0);if(t.isHost){var n=findHostAttendeeObject();n&&(n.isHost=0),e&&(e.isHost=1,g.getMeetingStatusObj().hostName=e.name),g.getMeetingStatusObj().hostId=t.userId,uiAgent.refreshChatPriviledgeUI(chatObject.attendeeChatPriviledge)}if(t.isCoHost&&(g.getMeetingStatusObj().coHost.push({id:t.userId,name:t.userDisplayName}),uiAgent.refreshChatPriviledgeUI(chatObject.attendeeChatPriviledge)),t.isHost||t.isCoHost||uiAgent.addChatUserToUserList(e),t.isMyself&&(myStatusObject=getAttendeeObject(t.userId),myStatusObject.videoMuteByHost=!g.getMeetingStatusObj().CanUnmuteMyVideo,uiAgent.refreshChatPriviledgeUI(chatObject.attendeeChatPriviledge),uiAgent.refreshForHostChange(),1==g.getMeetingStatusObj().isSupportWaitingRoom&&1==g.getMeetingStatusObj().isPutOnHoldOnEntryOn&&(t.isHost||t.isOrgHost||t.isAltHost)&&inmeeting.outWaitingRoom(),t.isCoHost&&(toolbar.showShareOptionArrow(),uiAgent.refreshAttendeeChatUI(),chat.refreshChatConsole())),!e)break;""!==e.smallPicUrl&&uiAgent.refreshParticipantAvatar(e),inmeeting.saveTelephoneUserNum(),null!==(i=winMgr.getWinByWinId("joinAudioWindow"))&&i.contentWindow.showBindPhoneInfo(),participants.refreshParticipantNumber();break;case"onUserLeft":var i;if(!(e=getAttendeeObject(t.userId,!0)))break;if(e.isMyself)break;e=Object.assign({},e),uiAgent.removeChatUserFromUserList(e);for(var a=0;a<attendeeList.length;a++)if(attendeeList[a].id==t.userId){attendeeList.splice(a,1);break}commonModule.rendererMgr.getInstance().onUserLeft(t.userId),videoReady&&common.postMessageToNaCl({type:"video",command:"video.stopAttendeVideo",userId:t.userId}),inmeeting.saveTelephoneUserNum(),null!==(i=winMgr.getWinByWinId("joinAudioWindow"))&&i.contentWindow.showBindPhoneInfo(),participants.refreshParticipantNumber();break;case"onUserUpdate":var o;if(e=getAttendeeObject(t.userId,!0))20<(u=C=t.userDisplayName).length&&(u=common.formatNameByLength(u,20)),e.shortName=u,40<(o=C).length&&(o=common.formatNameByLength(o,40)),e.longName=o,e.name=t.userDisplayName,e.isInCMR=t.isInCMR,e.isInRecording=t.isInRecording,uiAgent.refreshChatUser(e),inmeeting.refreshUserDisplayName(t.userId,e),commonModule.rendererMgr.getInstance().onUserNameUpdate(e);break;case"onWaitingUserListUpdate":if(0===t.waitingCount&&t.waitingCount===g.getMeetingStatusObj().waitingCount)break;var s=0,r="",d=g.getMeetingStatusObj().waitingUserList.concat();g.getMeetingStatusObj().waitingUserList=[];var c=g.getMeetingStatusObj().waitingUserList;if(1==t.waitingCount&&(s=t.waitingUser0.userID,30<(r=r=t.waitingUser0.userDisplayName).length&&(r=common.formatNameByLength(r,30))),1<=t.waitingCount)for(var l=0;l<t.waitingCount;l++){var u,S=d.find(function(e){return e.userID===t["waitingUser"+l].userID});S||(S={userID:t["waitingUser"+l].userID,userDisplayName:t["waitingUser"+l].userDisplayName,smallPicUrl:t["waitingUser"+l].smallPicUrl,picBlobUrlSmall:""}),c.push(S),20<(u=t["waitingUser"+l].userDisplayName).length&&(u=common.formatNameByLength(u,20)),g.getMeetingStatusObj().waitingUserList[l].shortName=u,""==t["waitingUser"+l].smallPicUrl?c[l].picBlobUrlSmall=t["waitingUser"+l].smallPicUrl:inmeeting.showSmallPic(S.userID,S.smallPicUrl)}g.getMeetingStatusObj().waitingCount=t.waitingCount,uiAgent.showWaitingRoomNotice(s,r,g.getMeetingStatusObj().waitingCount,d);break;case"onConfStatusChanged":handleMessageConfStatusChanged(t);break;case"onUserStatusChanged":handleMessageUserStatusChanged(t);break;case"StartAutoJoinWebMeeting":uiAgent.showConnecting();break;case"onLocalTokenEmpty":0==t.localToken&&uiAgent.showSignedOutUI();break;case"onConfNeedPassword":uiAgent.showEnterMeetingPassword(1,t.passwordError);break;case"onNotifyLoginResult":handleMessageNotifyLoginResult(t);break;case"onOtherClientLogin":break;case"onOtherClientCallInvitaion":client.onReceiveMeetingInvitation(t);break;case"onNotifyLogoutResult":0===t.result&&uiAgent.logoutSuccess();break;case"onGetGoogleLoginURL":create3rdPartyLoginWebview(t);break;case"onSink_GA_GetAccessToken":case"onSink_GA_ListCalendarEvents":break;case"onGetFBLoginURL":case"onGetSSOLoginURL":create3rdPartyLoginWebview(t);break;case"onQuerySSOVanityURLByEmail":if(t.result)joinmeeting.showSsoDomainQueryFailedMsg();else{var O=t.url.split("//")[1];joinmeeting.getSSOLoginURL(O)}break;case"onReconnectForChangeRole":uiAgent.showConnecting(1===t.promote?"promote":"depromote");break;case"onReconnectForBO":uiAgent.showConnecting(1===t.joinBO?"joinBO":"leaveBO");break;case"onConfWebinarNeedReg":t.manualApprove?(util.openTab(t.registerURL),backgroundWindow&&backgroundWindow.setNormalExit(),window.close()):uiAgent.showWebinarRegistration();break;case"onConfStat":var h=winMgr.getWinByWinId("settingWindow");null!==h&&h.contentWindow.refreshConfStat(t);break;case"onCanStartCMRCheck":g.getMeetingStatusObj().canStartCMR=t.canStartCMR,showRecording(),refreshRecordButton(),uiAgent.refreshRecordingStatusForLayout();break;case"onNotifyConnectQAStart":case"onNotifyConnectQAResult":case"onRefreshQAUI":break;case"onGetEditPollingURL":inmeeting.saveEditPollingURL(t.editPollingURL);break;case"onAddQuestion":qa.refreshQAContent(t,"question");break;case"onAddAnswer":qa.refreshQAContent(t,"answer");break;case"onReceiveQuestion":qa.refreshQAContent(t,"question");break;case"onReceiveAnswer":qa.refreshQAContent(t,"answer"),isWebinarViewerMode()&&qa.refreshQARemind();break;case"onQuestionMarkedAsDismissed":qa.refreshQAContent(t,"dismiss");break;case"onReopenQuestion":qa.refreshQAContent(t,"reopen");break;case"onQuestionMarkedAsAnswered":case"onChattedAttendeeUpdated":case"onUserComposing":case"onUserEndComposing":break;case"onUserLivingReply":qa.refreshQAContent(t,"live");break;case"onUserEndLiving":case"onUserListUpdated":break;case"onUserListInitialized":for(l=0;l<t.viewerCount;l++){var b=t["viewerItem"+l];viewerList.find(function(e){return e.viewerNodeID==b.viewerNodeID})||viewerList.push({viewerNodeID:b.viewerNodeID,viewerName:b.viewerName,raiseHandStatus:b.raiseHandStatus,hasChatted2Panelists:b.hasChatted2Panelists,viewerIsPhone:b.isPhone})}client.refreshByViewerList(),participants.refreshParticipantNumber();break;case"onUserAdded":var C=t.viewerName;viewerList.find(function(e){return e.viewerNodeID==t.viewerNodeID})||viewerList.push({viewerNodeID:t.viewerNodeID,viewerName:C,raiseHandStatus:t.raiseHandStatus,hasChatted2Panelists:t.hasChatted2Panelists,viewerIsPhone:t.viewerIsPhone}),participants.refreshParticipantNumber();break;case"onUserRemoved":for(var m=0;m<viewerList.length;m++)viewerList[m].viewerNodeID==t.viewerNodeID&&(uiAgent.removeChatUserFromUserList(viewerList[m]),viewerList.splice(m,1));participants.refreshParticipantNumber();break;case"onAttendeeRemoved":break;case"onWebinarAttendeeRaisedHand":t.isMe?client.refreshWebinarViewerHand("raise",t):inmeeting.refreshViewerHand4Plist(1,t.userID);break;case"onWebinarAttendeeLowerHand":t.isMe?client.refreshWebinarViewerHand("lower",t):inmeeting.refreshViewerHand4Plist(0,t.userID);break;case"onPollingDocReceived":pollingDocObject=t,refreshPollingDoc(t),initPollingWindowUI();break;case"onPollingStatusChanged":if(pollingStatusObject=t,g.getMeetingStatusObj().isInWaitingRoom)break;"OPEN"==t.action?client.countPollingTime(t.elaspedTime):client.stopCountPollingTime(),refreshPollingWindowByStatus(!1),null!==(M=winMgr.getWinByWinId("pollWindow"))&&M.contentWindow.poll.refreshPollingWindowUI();break;case"onPollingResultUpdated":var M;updatePollingResult(t),refreshPollingResult(t.pollingItem),null!==(M=winMgr.getWinByWinId("pollWindow"))&&M.contentWindow.poll.refreshPollingWindowUI();break;case"onPollingActionResult":refreshPollingWindowByActionResult(t);break;case"onGetCallInInfo":inmeeting.saveCallInInfo(t);break;case"onGetCallOutInfo":inmeeting.saveCallOutInfo(t);break;case"onGetCurrentUserCallOutInfo":case"onGetPhoneCallInNumber":case"onGetTollFreeCallInNumber":break;case"onInOtherShare":t.inOtherShare&&uiAgent.showSwitchViewAndTurnPage(0);break;case"onDebugInfo":break;case"OnGetGmailInviteInfo":case"OnGetYahooInviteInfo":var I=callbackMap[t.id],w=t.url;I&&I(null,w);break;case"OnGetCopyInviteInfo":I=callbackMap[t.id];var A=t.body;I&&I(null,A);break;case"onBOUserListUpdated":case"onMasterConfUserListUpdated":break;case"onMasterConfHostChanged":inmeeting.handleOnMasterConfHostChanged(t);break;case"onBOControlStatusChanged":inmeeting.handleBOControlStatusChanged(t);break;case"onBOControllerJoinedThisBOMeeting":g.getMeetingStatusObj().isHostInBo=!0;break;case"onBOControllerLeaveThisBOMeeting":g.getMeetingStatusObj().isHostInBo=!1;break;case"onBOTokenReady":break;case"onBOStoppingTick":var _=winMgr.getWinByWinId("boWin");_&&_.contentWindow.bo.updateCountDown(t.leftSeconds);break;case"onHelpRequestReceived":inmeeting.createHostAskForWindow(t);break;case"onBOStartRequestReceived":mainWindow.restore(),mainWindow.focus(),g.getMeetingStatusObj().BID=t.BID,g.getMeetingStatusObj().BOName=t.meetingName,client.createJoinBoWindow(t.BID,t.meetingName),client.hideBroadcastMsg(),inmeeting.showHideBoButtonOnToolbar();break;case"onBOStopRequestReceived":g.getMeetingStatusObj().waitSeconds=Number(t.waitSeconds),g.getMeetingStatusObj().inBO&&0<g.getMeetingStatusObj().waitSeconds?client.createCountDownWindow(g.getMeetingStatusObj().waitSeconds):closeWindow("joinBoWin"),$("li.bo, li.askForHelp").off("click"),toolbar.showToolbarIcon("bo",!1),toolbar.showToolbarIcon("askforhelp",!1);break;case"onHelpRequestHandleResultReceived":g.getMeetingStatusObj().resultStr=t.resultStr,client.showNoticeToAttendee(g.getMeetingStatusObj().resultStr);break;case"onNewBroadcastMessageReceived":var E=t.msg,N=t.senderUserName;client.showBroadcastMsg(N,E,!1);break;case"onBOSwitchRequestReceived":g.getMeetingStatusObj().BID=t.BID,g.getMeetingStatusObj().BOName=t.meetingName,g.getMeetingStatusObj().inBO?inmeeting.switchBO(t.BID):(closeWindow("joinBoWin"),setTimeout(function(){client.createJoinBoWindow(t.BID,t.meetingName)},500));break;case"onBOConfigDataChanged":g.getMeetingStatusObj().isBackToMainSessionEnabled=t.isBackToMainSessionEnabled,inmeeting.boObj.isParticipantsChooseRoomEnabled=t.isParticipantsChooseRoomEnabled;break;case"onGetMyBOStatus":g.getMeetingStatusObj().isBackToMainSessionEnabled=t.isBackToMainSessionEnabled,inmeeting.boObj.isParticipantsChooseRoomEnabled=t.isParticipantsChooseRoomEnabled,inmeeting.boObj.myBOStatus=t.myBOStatus,inmeeting.showHideBoButtonOnToolbar(),"JOINED"==t.myBOStatus||("ASSIGNED_NOT_JOINED"==t.myBOStatus?(g.getMeetingStatusObj().BID=t.BID,g.getMeetingStatusObj().BOName=t.meetingName,toolbar.showToolbarIcon("bo",!0),client.hideBroadcastMsg()):"STARTED_NOT_ASSIGNED"==t.myBOStatus?client.showBoWaitingToBeAssignedMsg():t.myBOStatus);break;case"onGetAllBOInfo":inmeeting.handleGetAllBOInfo(t);break;case"onClosedCaptionMessageReceived":inmeeting.canShowCCButton(),inmeeting.handleCCMsgReceived(t.content);break;case"onCanShowCCButton":CCStatusObject.canShowCCButton=t.canShowCCButton,CCStatusObject.hasAssignedCCEditor=t.hasAssignedCCEditor,CCStatusObject.CCEditroUserID=t.CCEditroUserID,CCStatusObject.isMyself=t.isMyself,inmeeting.showHideCCButtonOnToolbar();break;case"onCanStartShare":1===t.canStartShare?inmeeting.onShareCheckPassed():1===t.reason?uiAgent.showMeetingAlert("Host disabled participant screen sharing."):2===t.reason?uiAgent.showMeetingAlert("Host disabled participant screen sharing."):3===t.reason?client.showDivWindow("window-startshare"):4===t.reason&&uiAgent.showMeetingAlert("You cannot start screen share while the other participant is sharing.");break;case"onBuddyListReady":joinmeeting.getBuddyList(),joinmeeting.getRoomList();break;case"onGetBuddyList":invite.refreshBuddyList(t.buddyList);break;case"onGetRoomList":invite.refreshZoomRoomList(t);break;case"onSearchBuddyByKey":invite.onSearchByText(t);var T=winMgr.getWinByWinId("inviteWin");T&&T.contentWindow.invite.onSearchByText(t);break;case"onBatchBuddyBaseInfo":invite.onContactBaseInfo(t),window.eev.emit(g.getConstants().CONTACTS.BASE_INFO,t);break;case"onBatchBuddyUpdate":window.eev.emit(g.getConstants().CONTACTS.BUDDY_UPDATE,t);break;case"onGetBatchBuddy":window.eev.emit(g.getConstants().CONTACTS.BUDDY_SEARCH,t);break;case"onGetBatchBuddyWithGroupID":window.eev.emit(g.getConstants().CONTACTS.BUDDY_WITH_GROUPID,t);break;case"onZRBackgroundImgUrlUpdated":case"onZRNeedRestart":case"onOSNeedRestart":break;case"onMyUserProfileUpdated":"isDisablePMI"in t&&(userStatus.isDisablePMI=t.isDisablePMI),"isAlwaysUsePMIEnabledOnWeb"in t&&(userStatus.isAlwaysUsePMIEnabledOnWeb=t.isAlwaysUsePMIEnabledOnWeb),client.updatePMIOption();break;case"onNeedConfirmPrivacyAndTOS":joinmeeting.showGDPR(t);break;case"onNeedConfirmVideoPrivacyWhenJoinMeeting":window.eev.emit(g.getConstants().VIDEO_PREVIEW);break;case"onShowMatchManagedDomainConfirm":window.eev.emit(g.getConstants().MATCH_MANAGED_DOMIAN_CONFIRM,t);break;case"onNeedConfirmUnmutePrivacyWhenJoinMeeting":window.eev.emit(g.getConstants().ALLOW_HOST_UNMUTE_CONFIRM,t.hostName);break;case"onUpcomingMeetingAlert":break;case"onUpgradeLocalShareMeetingToNormal":g.getMeetingStatusObj().isLocalShareMeeting=0;break;case"onUpgradePSTNMeetingToNormal":g.getMeetingStatusObj().isPSTNCalloutMeeting=0;break;case"onActionFromZRC":case"onReleaseConfResource":case"onInviteH323orSIPDeviceStatusChanged":case"onGetSharingKey":break;case"onHandleIncomingCall":willJoinAnotherConf=!0,client.onHandleIncomingCall(t);break;case"onNotifyUIInviteList":case"onNotifyUIInstructionState":case"onNotifyPSTNCallInfo":break;case"onCertItemVerifyFailed":window.eev.emit(g.getConstants().SSL_CERTIFICATE_WARNING,{blockUnknown:t.blockUnknown});break;case"onSendProblemReport":case"onShareSourceAnnotationSupportChanged":break;case"onShareSettingTypeChanged":g.getMeetingStatusObj().meetingShareType=t.eType,client.onShareTypeChanged();break;case"onDSFileDownloadStatus":case"notifyUILeaveWaitingRoom":break;case"onSwitchHideNonVideoNotify":g.getMeetingStatusObj().isHideNonVideo=t.hideNonVideo;break;case"onSwitchHideMyVideoNotify":g.getMeetingStatusObj().isHideSelfView=t.hideMyVideo;break;case"onRecordingConsentConfirmed":break;case"isAskAllToUnmuteAvailable":window.eev.emit(g.getConstants().HOST_ASK_ALL_TO_UNMUTE,t.isAskAllToUnmuteAvailable);break;case"onUnencryptedStatusChanged":window.eev.emit(g.getConstants().MEETING_UNCRYPED_STATUS_CHANGE,t.textArrary),g.getMeetingStatusObj().exceptionCount=t.textArrary instanceof Array?t.textArrary.length:0,client.setConfEncryptionType()}}function handleMessageAudio(e){switch(e.EVENT){case"onMicSpeechLevelChanged":if(!myStatusObject)return;if("AUDIO_NONE"==myStatusObject.audioType||"AUDIO_TELEPHONY"==myStatusObject.audioType)return;refreshAudioState(e.status);var t=winMgr.getWinByWinId("shareMainWindow");t&&t.contentWindow.refreshAudioState&&t.contentWindow.refreshAudioState(e.status);break;case"onBatchAudioStatusChanged":for(var n=0;n<e.audioStatus.length;n++){var i=e.audioStatus[n],a=getAttendeeObject(i.userId,!0);a&&(a.audioType=i.audioType,a.audioIsMuted=i.audioIsMuted,a.isUserNeedUnmuteAudioConsent=i.isUserNeedUnmuteAudioConsent,commonModule.rendererMgr.getInstance().onUserAudioStatusChange(i),inmeeting.showMuteIcon(i.audioIsMuted,i.userId,a.audioType),uiAgent.refreshAttendeeAudioStatus(a),a.isMyself&&(uiAgent.refreshMuteButton(i.audioIsMuted),participants.refreshShareMainWindowStatus(),window.eev.emit(g.getConstants().CONF_STR.SPOTLIGHT_UNMUTE_CONFIRM,!1),i.byHost&&i.audioIsMuted&&(i.toAll?inmeeting.showNotice("The host muted everyone."):inmeeting.showNotice("The host muted you."))))}break;case"onHostAskUserUnmute":window.eev.emit(g.getConstants().CONF_STR.SPOTLIGHT_UNMUTE_CONFIRM,"unmuteMe");break;case"onUnmuteNotAllowed":uiAgent.showMeetingAlert("The host is not allowing participants to unmute themselves.")}}function handleMessageVideo(e){switch(e.EVENT){case"OnFloatingVideoControlInfo":inmeeting.updateThumbVideoInfo(e);break;case"onVideoUINotifyDelete":onVideoUINotifyDelete(e);break;case"onVideoUINotifyUpdate":onVideoUINotifyUpdate(e);break;case"onBatchNotifyVideoUI":if(e.isDeleteAll&&resetAttendeeView("attendee"),e.deleteList)for(var t=0;t<e.deleteList.length;t++)onVideoUINotifyDelete({userId:e.deleteList[t]});if(e.updateList){for(var n=0;n<e.updateList.length;n++)onVideoUINotifyUpdate(e.updateList[n]);inmeeting.updateVideoUIStatus()}break;case"onVideoUIActiveSpeakerUpdate":onVideoUIActiveSpeakerUpdate(e);break;case"onVideoUINotify":if(1!==e.reset){if(commonModule.startRenderFloatVideo(0),!getAttendeeObject(e.userId,!0))break;e.isFullscreen&&(client.TalkingUserBar.init(e),client.TalkingUserBar.setPosition());break}commonModule.startRenderFloatVideo(0);break;case"onVideoUIActiveSpeakerNotify":1!==e.reset?onVideoUIActiveSpeakerUpdate(e):resetAttendeeView("activeSpeaker"),lastVideoViewStatus=e.curVideoViewStatus;break;case"onNotifyShowTalkingbar":e.talkingUsers&&inmeeting.updateTalkingUser(e.talkingUsers);break;case"onNotifyScreenVideoUIStatus":g.getMeetingStatusObj().videoMode=e.viewModeUIStatus.mode,e.viewModeUIStatus.mode!==g.getConstants().VIDEO_MODE_GALLERY&&e.viewModeUIStatus.mode!==g.getConstants().VIDEO_MODE_THUMBNAIL&&(g.getMeetingStatusObj().videoMode=g.getConstants().VIDEO_MODE_SPEAKER),g.getMeetingStatusObj().inGalleryView=2===e.viewModeUIStatus.mode?1:0,uiAgent.refreshSwitchView2(),inmeeting.resetCanSwitch2Gallery(e.viewModeUIStatus.canSwitchToGallery),inmeeting.updateScreenVideoUIStatus(e.mulDisplayInstUIStatus),commonModule.rendererMgr.getInstance().onRendererScreenViewUpdate(e);break;case"onNotifyEnableMoveShareArea":inmeeting.setupShareAreaMovePicture(e.userID,e.enable);break;case"onNotifyShareStatus":1===e.shareStatus?uiAgent.showIsStartingShare(1):uiAgent.showIsStartingShare(0);break;case"onNotifyVideoUIStatus":inmeeting.refreshPageTurnButton4GalleryView(e),e.mode===g.getConstants().VIDEO_MODE_GALLERY&&inmeeting.refreshCurrentActiveSpeaker(1);var i=document.getElementById("pre4attendee"),a=document.getElementById("next4attendee");if(e.mode===g.getConstants().VIDEO_MODE_SPEAKER&&1<e.totalPageNumber){var o=e.currentPageIndex+1;o<=1?(i.style.display="none",a.style.display="block"):o>=e.totalPageNumber?(i.style.display="block",a.style.display="none"):(i.style.display="block",a.style.display="block")}else i.style.display="none",a.style.display="none";inmeeting.refreshturnPageButton(e),g.getMeetingStatusObj().videoMode=e.mode,g.getMeetingStatusObj().inGalleryView=2===e.mode?1:0,saveToLocal("videoMode",e.mode,console.log),uiAgent.refreshSwitchView2(),inmeeting.updateVideoUIStatus(e),inmeeting.resetCanSwitch2Gallery(e.canSwitchToGallery),client.refreshPinUser(e),client.TalkingUserBar.show(e.isThumbVideoShowingForSpeakerView);break;case"onUnmuteNotAllowed":uiAgent.showMeetingAlert("you can't start your video because the host has stoped it."),inmeeting.stopMyVideo();break;case"onNotifyCloseCamera":inmeeting.stopMyVideo();break;case"onZRCStartSendMyVideo":inmeeting.startMyVideo();break;case"onZRCStopSendMyVideo":inmeeting.stopMyVideo();break;case"onZRCSwitchCamera":case"onZRCControlCamera":case"onZRCControlHDMIShare":break;case"onSettingChanged":"mirrorEffect"===e.key&&setMirrorEffect(e.value);break;case"onVideoTrackUpdateComplete":inmeeting.switchCameraComplete();break;case"onDSdataStatus":case"onASServerMsg":case"onZRCControlDSShare":case"showPinInstruction":break;case"onRestoreMainWindow":shareStream&&shareStream.getTracks()[0].stop(),inmeeting.stopShare(),closeShareWindow(),mainWindow.isMinimized()&&(mainWindow.restore(),mainWindow.focus());break;case"onEnableVideoExternalData":startNewVideoCaptureTimer();break;case"onRequestNewVideoExternalData":needNewVideoExternalData=!0}}function handleMessageDevice(e){switch(e.EVENT){case"onDeviceStatusChanged":"AUDIO_ERROR_FEEDBACK_DETECTED"==e.status?inmeeting.showNotice("Your audio is disconnected as we detected an echo."):"AUDIO_MIC_NO_DEVICE_FOUND"==e.status&&inmeeting.showNotice("No microphone is detected. Please connect the microphone.");break;case"onShareRenderAreaNotify":$("#shareArea").css("left",e.renderLeft+"px").css("top",e.renderTop+"px"),$("#shareArea").css("width",e.renderWidth+"px").css("height",e.renderHeight+"px")}}function handleMessageChat(e){switch(e.EVENT){case"onChatMessageReceived":chat.refreshMessageChat(e);break;case"onChatMessageDeleted":chat.handleMessageChatDelete(e)}}function handleMessageUser(e){e.EVENT}function handleMessageData(t){t.changed&&Object.keys(t.changed).forEach(function(e){saveToLocal(e,t.changed[e])}),Array.isArray(t.removed)&&t.removed.forEach(function(e){return removeFromLocal(e)})}function lcpReplacer(e,t){return"lcpString"===e?"<lcp>":"TYPE"===e||"EVENT"===e?void 0:t}function handleMessageConfStatusChanged(e){switch(e.status){case"S_CONF_CONF_READY":inmeeting.resetUIStatus(),willRejoin=!1,willJoinAnotherConf=!1,backgroundWindow&&backgroundWindow.setJoinedMeeting(),joinmeeting.clearStartJoinTimmer(),client.stopLoginVideo(),joinmeeting.setInMeeting(!0),keepDeviceAwake(!0),g.getMeetingStatusObj().meetingNo=e.meetingno,joinmeeting.saveConfList(e),g.getMeetingStatusObj().launchReason=e.launchReason,g.getMeetingStatusObj().isBOInOutStatusShowed=!1,g.getMeetingStatusObj().isWebinar=e.isWebinar,g.getMeetingStatusObj().meetingIsViewOnly=e.isViewOnlyJoin,g.getMeetingStatusObj().inviteURL=e.inviteURL,g.getMeetingStatusObj().meetingTopic=e.meetingtopic,g.getMeetingStatusObj().hostName=e.hostName,g.getMeetingStatusObj().isChatOff=e.isChatOff,g.getMeetingStatusObj().isPrivateChatOff=e.isPrivateChatOff,g.getMeetingStatusObj().canCopyChatContent=e.canCopyChatContent,g.getMeetingStatusObj().isPSTNCalloutMeeting=e.isPSTNCalloutMeeting,g.getMeetingStatusObj().isQAoff=e.isQAoff,g.getMeetingStatusObj().isSupportCallMe=e.isSupportCallMe,g.getMeetingStatusObj().isSupportCallIn=e.isSupportCallIn,g.getMeetingStatusObj().isSupportVoip=e.isSupportVoip,g.getMeetingStatusObj().isOtherTeleOn=e.isOtherTeleOn,g.getMeetingStatusObj().otherTeleInfo=e.otherTeleInfo,g.getMeetingStatusObj().inGalleryView=e.inGalleryView,g.getMeetingStatusObj().videoMode=e.videoMode,g.getMeetingStatusObj().isPutOnHoldOnEntryLocked=e.isPutOnHoldOnEntryLocked,g.getMeetingStatusObj().isSupportWaitingRoom=e.isSupportWaitingRoom,g.getMeetingStatusObj().isPutOnHoldOnEntryOn=e.isPutOnHoldOnEntryOn,g.getMeetingStatusObj().isMeetingSupportSilentMode=e.isMeetingSupportSilentMode,g.getMeetingStatusObj().isBOEnabled=e.isBOEnabled,g.getMeetingStatusObj().isVideoOn=e.isVideoOn,g.getMeetingStatusObj().CanUnmuteMyVideo=e.CanUnmuteMyVideo,g.getMeetingStatusObj().isSupportZoomIM=e.isSupportZoomIM,g.getMeetingStatusObj().isFeedbackEnable=e.isFeedbackEnable,g.getMeetingStatusObj().password=e.password,g.getMeetingStatusObj().rawPassword=e.rawPassword,g.getMeetingStatusObj().isPSTNPassWordOn=e.isPSTNPassWordOn,g.getMeetingStatusObj().PSTNPassWord=e.PSTNPassWord,g.getMeetingStatusObj().shareUrl=e.shareUrl,g.getMeetingStatusObj().isHideNonVideo=e.hideNonVideo,g.getMeetingStatusObj().isHideSelfView=e.hideMyVideo,g.getMeetingStatusObj().encryptionAlg=e.encryptionAlg,g.getMeetingStatusObj().meetingShareType=e.getDefaultShareSettingType,g.getMeetingStatusObj().isScreenShareDisabled=e.isScreenShareDisabled,g.getMeetingStatusObj().isShareSettingTypeLocked=e.isShareSettingTypeLocked,g.getMeetingStatusObj().isRecordDisabled=e.isRecordDisabled,g.getMeetingStatusObj().isAutoCMRForbidManualStop=e.isAutoCMRForbidManualStop,g.getMeetingStatusObj().isLocalRecordDisabled=e.isLocalRecordDisabled,g.getMeetingStatusObj().isAuthLocalRecordDisabled=e.isAuthLocalRecordDisabled,g.getMeetingStatusObj().isShareDesktopDisabled=e.isShareDesktopDisabled,g.getMeetingStatusObj().isAllowParticipantRenameEnabled=e.isAllowParticipantRenameEnabled,1==g.getMeetingStatusObj().isBOEnabled&&(g.getMeetingStatusObj().inBO=e.inBO,g.getMeetingStatusObj().BID=e.BID,g.getMeetingStatusObj().BOName=e.BOName,g.getMeetingStatusObj().maxBOCount=e.maxBOCount,0==g.getMeetingStatusObj().inBO||inmeeting.showHideBoButtonOnToolbar()),g.getMeetingStatusObj().isClosedCaptionOn=e.isClosedCaptionOn,g.getMeetingStatusObj().canShowCCButton=e.canShowCCButton,switchUIToInmeeting(),inmeeting.bindEvent(),chat.bindEvent(),uiAgent.refreshSwitchView2(),inmeeting.showHideShareButtonOnToolbar(),g.getMeetingStatusObj().isLocalShareMeeting=e.isLocalShareMeeting,g.getMeetingStatusObj().joinLocalShareReason=e.joinLocalShareReason,g.getMeetingStatusObj().isLocalShareMeeting||g.getMeetingStatusObj().isPSTNCalloutMeeting||g.getMeetingStatusObj().isInWaitingRoom||commonModule.rendererMgr.getInstance().initConfView(),window.eev.emit(g.getConstants().CONF_STR.CONF_READY),videocontrol.reset();break;case"S_CONF_WAITTING_TO_JOIN":g.getMeetingStatusObj().isWebinar=e.isWebinar,g.getMeetingStatusObj().meetingTopic=e.meetingtopic,joinmeeting.clearStartJoinTimmer(),uiAgent.showWaitingForHost(e),joinmeeting.setInMeeting(!0);break;case"S_CONF_START":break;case"S_CONF_RECONNECT":willRejoin=!0,isNaClReloaded=!1,reloadJoinMeetingPageandNaClModule(),uiAgent.showConnecting();break;case"CMD_AUDIO_READY":myStatusObject.audioType=e.audioType,myStatusObject.audioIsMuted=e.audioIsMuted,"AUDIO_VOIP"==e.audioType&&(g.getMeetingStatusObj().isLocalShareMeeting||inmeeting.initAudioStatus()),handleMyselfAudioTypeChanged(e.audioType,e.audioIsMuted,e);break;case"CMD_VIDEO_READY":client.stopLoginVideo(),g.getMeetingStatusObj().meetingIsViewOnly?sendInitVideoCommand(null):meetingAutoStartMyVideo||g.getMeetingStatusObj().startMeetingByMySelf?inmeeting.getIsOutWaitingRoom()?inmeeting.getCameraIsOnBeforeEnterWaitingroom()?inmeeting.initVideoStatus():(sendInitVideoCommand(null),uiAgent.updateVideoButton(!0)):!g.getMeetingStatusObj().isLocalShareMeeting&&g.getMeetingStatusObj().isVideoOn?inmeeting.initVideoStatus():(sendInitVideoCommand(null),uiAgent.updateVideoButton(!0)):(sendInitVideoCommand(null),uiAgent.updateVideoButton(!0)),videoReady=!0,$("#next4attendee").off("click").on("click",function(){common.postMessageToNaCl({type:"video",command:"video.showNext4AttendeeView"})}),$("#pre4attendee").off("click").on("click",function(){common.postMessageToNaCl({type:"video",command:"video.showPre4AttendeeView"})});break;case"CMD_VIDEO_AUTOSTART":break;case"CMD_CONF_READY":inmeeting.setIsOutWaitingRoom(!1),removeFromLocal("lcpString"),g.getMeetingStatusObj().waitingTitle=e.waitingTitle,g.getMeetingStatusObj().waitingDescription=e.waitingDescription,g.getMeetingStatusObj().waitingLogoUrl=e.waitingLogoUrl,delete g.getMeetingStatusObj().waitingLogoBlob,e.inSilentMode?inmeeting.enterWaitingRoom():(g.getMeetingStatusObj().isInWaitingRoom=!1,client.showBoWaitingToBeAssignedMsg()),participants.refreshParticipantNumber(),g.getMeetingStatusObj().isWebinar||g.getMeetingStatusObj().inBO?toolbar.showToolbarIcon("security",!1):(myStatusObject.isHost||myStatusObject.isCoHost)&&toolbar.showToolbarIcon("security",!0);break;case"CMD_CONF_DC_REGION_READY":var t="";if(3==e.regionType)t=g.getConstants().DC_INFO_ONPREM;else if(2==e.regionType)t=g.getConstants().DC_INFO_HYBRID;else{if(1!=e.regionType)return;t=g.getConstants().DC_INFO_REGION.replace("%s",e.region)}g.getMeetingStatusObj().DCRegion=t,window.eev.emit(g.getConstants().INMEETING_INFO_WINDOW.CHANGE);break;case"CMD_CONF_FAIL":switch(naclReleaseConfResource(),removeFromLocal("lcpString"),willRejoin=!1,willJoinAnotherConf=!1,joinmeeting.clearStartJoinTimmer(),e.reason){case"CONF_FAIL_NETWORK_ERR":uiAgent.showJoinConfFail("invalid","","CONF_FAIL_NETWORK_ERR",e.errCode);break;case"CONF_FAIL_CONF_USER_FULL":uiAgent.showJoinConfFail("invalid","","CONF_FAIL_CONF_USER_FULL",e.limit);break;case"CONF_FAIL_CONFLOCKED":uiAgent.showJoinConfFail("invalid","","CONF_FAIL_CONFLOCKED","","",function(){backgroundWindow&&backgroundWindow.setNormalExit()});break;case"CONF_FAIL_REGISTERWEBINAR_ENFORCE_LOGIN":e.bLogin&&"switchAccountToJoin"==e.bLogin&&uiAgent.showJoinConfFail("invalid","",e.reason,"",e.bLogin),e.bLogin&&"signInToJoin"==e.bLogin&&uiAgent.showJoinConfFail("invalid","",e.reason,"",e.bLogin);break;case"CONF_FAIL_MEETING_NOT_EXIST":joinmeeting.hideWaiting(),uiAgent.showJoinConfFail("invalid","",e.reason,"");break;case"CONF_FAIL_CLIENT_INCOMPATIBLE":case"CONF_FAIL_VANITY_NOT_EXIST":case"CONF_FAIL_REGISTERWEBINAR_DENIED_EMAIL":case"CONF_FAIL_MEETING_RESTRICTED":case"CONF_FAIL_MEETING_OVER":case"CONF_FAIL_REGISTERWEBINAR_HOSTREGISTER":case"CONF_FAIL_REGISTERWEBINAR_FULL":case"CONF_FAIL_REGISTERWEBINAR_PANELISTREGISTER":case"CONF_FAIL_MEETING_RESTRICTED_JBH":uiAgent.showJoinConfFail("invalid","",e.reason,"",e.bLogin);break;case 103044:client.createLeaveMeetingWindow("multipleDevice");break;case 103039:uiAgent.showJoinConfFail("invalid","",e.reason,"","",function(){backgroundWindow&&backgroundWindow.setNormalExit()});break;case 10006e4:uiAgent.showJoinConfFail("invalid","",e.reason);break;default:uiAgent.showJoinConfFail("invalid","","DEFAULT",e.reason)}"CONF_FAIL_REGISTERWEBINAR_PANELISTREGISTER"==e.reason||"CONF_FAIL_REGISTERWEBINAR_DENIED_EMAIL"==e.reason||(client.showJoinForm(),keepDeviceAwake(!1));break;case"CMD_CONF_LEAVE":break;case"CMD_CONF_LEAVE_COMPLETE":switch(window.eev.emit(g.getConstants().CONF_STR.CONF_LEAVE_COMPLETE),backgroundWindow&&(willRejoin||backgroundWindow.setNormalExit()),joinmeeting.clearStartJoinTimmer(),keepDeviceAwake(!1),willRejoin||(isNaClReloaded=!1,reloadJoinMeetingPageandNaClModule()),e.reason){case"END_BY_SELF":break;case"KICK_BY_HOST":client.createEndedMeetingWindow("leaveNotice-remove");break;case"END_BY_HOST":client.createEndedMeetingWindow("leaveNotice-end");break;case"END_FOR_JBHTIMEOUT":client.createEndedMeetingWindow("leaveNotice-jbhtimeout");break;case"END_FOR_FREEMEET_TIMEOUT":client.createEndedMeetingWindow("leaveNotice-timeout");break;case"END_FOR_NOATEENDEE":client.createEndedMeetingWindow("leaveNotice-noattendee");break;case"END_BY_HOST_START_ANOTHERMEETING":client.createEndedMeetingWindow("leaveNotice-newmeeting");break;case"END_BY_SDK_CONNECTION_BROKEN":client.createEndedMeetingWindow("leaveNotice-sdkconnectionbroken");break;default:client.createEndedMeetingWindow("leaveNotice-default")}removeFromLocal("selectedJoinAudioTabName","audioStatus"),getFromLocal("rememberCallOut",function(e){e&&void 0!==e.rememberCallOut&&!1!==e.rememberCallOut||removeFromLocal("callOutNumber")});break;case"CMD_CONF_RECORD_STATUS":if(1==e.inRecording&&1==e.isCMR)for(var n=0;n<attendeeList.length;n++)(attendeeList[n].isHost||attendeeList[n].isCoHost)&&(attendeeList[n].isInCMR=1,attendeeList[n].isInRecording=1);else if(1==e.isCMRPaused||0==e.inRecording&&0==e.isCMR)for(n=0;n<attendeeList.length;n++)(attendeeList[n].isHost||attendeeList[n].isCoHost)&&(attendeeList[n].isInCMR=0,attendeeList[n].isInRecording=0);else if(1!=e.isCMRPaused&&0==e.isCMR)for(n=0;n<attendeeList.length;n++)(attendeeList[n].isHost||attendeeList[n].isCoHost)&&(attendeeList[n].isInCMR=0);recordStatusObject=e,inmeeting.canStartCMRCheck();break;case"CMD_CONF_RECORD_ERROR":void 0!==e.isRecordError&&8==e.isRecordError&&eev.emit(g.getConstants().RECORDING_FAIL,{show:!0});break;case"CMD_VIDEO_LEADERSHIPMODE_ONOFF":window.eev.emit(g.getConstants().CONF_STR.SPOTLIGHT_UNMUTE_CONFIRM,e.action);break;case"CMD_CONF_REMINDER_RECORDING":window.eev.emit(g.getConstants().RECORDING_REMINDER,Object.assign({show:!0},e));break;case"CMD_CONF_LOCKSTATUS_CHANGED":uiAgent.onMeetingLockChange(e.isLocked),g.getMeetingStatusObj().isMeetingLocked=e.isLocked;break;case"CMD_LOCKSHARE_STATUS_CHANGED":g.getMeetingStatusObj().isShareLocked=e.isLocked;break;case"CMD_CONF_FREEMEETING_REMAIN_TIME":uiAgent.showRemainMeetingTime(e.remainSec);break;case"CMD_CONF_STASTIC_WARNING":switch(e.reason){case"CONF_STATIC_WARNING_CPUHIGH":inmeeting.showNotice("Your high CPU usage is affecting the meeting quality.");break;case"CONF_STATIC_WARNING_BADNETWORK":inmeeting.showNotice("Your internet connection is unstable.")}break;case"CMD_AUDIO_MUTEALL_STATUS_CHANGED":break;case"CMD_AUDIO_MUTE_ON_ENTRY_STATUS_CHANGED":g.getMeetingStatusObj().isMuteOnEntryOn=e.muteOnEntry;break;case"CMD_DISALLOW_UNMUTESELF_STATUS_CHANGED":g.getMeetingStatusObj().allowUnmute=e.allowUnmuteSelf;break;case"CMD_CONF_ENABLE_WAITING_ROOM_ON_ENTRY_CHANGED":g.getMeetingStatusObj().isPutOnHoldOnEntryOn=e.putOnHoldOnEntryOn;break;case"CMD_CMR_START_TIMEOUT":inmeeting.showNotice("Failed to connect cloud server.");break;case"CMD_SHOWWEBINARATTENDEE_STATUS_CHANGED":case"CMD_VIEW_ONLY_USERCOUNT_CHANGED":break;case"CMD_CONF_ALLOW_ATTENDEE_CHAT_STATUS_CHANGED":chatObject.isAllowAttendeeChat=e.isAllowAttendeeChat,chatObject.attendeeChatPriviledge=e.attendeeChatPriviledge,g.getMeetingStatusObj().isWebinar?chatObject.isAllowAttendeeChat||(chatObject.attendeeChatPriviledge=chat.chatPriviledges.CHAT_PRIVILEDGE_DISABLE_ATTENDEE_CHAT):chatObject.isAllowAttendeeChat=chat.chatPriviledges.CHAT_PRIVILEDGE_DISABLE_ATTENDEE_CHAT!==e.attendeeChatPriviledge,uiAgent.refreshChatPriviledgeUI(chatObject.attendeeChatPriviledge),uiAgent.refreshAttendeeChatUI();break;case"CMD_CONF_ALLOW_ASK_QUESTION_ANONYMOUSLY_STATUS_CHANGED":var i=e.IsAllowAskQuestionAnonymously;inmeeting.setQaAnonymous(i);case"CMD_CONF_ALLOW_ATTENDEE_VIEW_ALL_QUESTION_STATUS_CHANGED":case"CMD_CONF_ALLOW_ATTENDEE_ANSWER_QUESTION_STATUS_CHANGED":break;case"CMD_CONF_ALLOW_RAISE_HAND_STATUS_CHANGED":client.showHandOption(e.isAllowRaiseHand),client.refreshWebinarViewerBarUI();break;case"CMD_CONF_CALL_OUT_STATUS_CHANGED":if(e.IsCallOthers){invite.updateCallStatus(e.callOutStatus);var a=winMgr.getWinByWinId("inviteWin");null!==a&&a.contentWindow.invite.updateCallStatus(e.callOutStatus)}else{var o=winMgr.getWinByWinId("joinAudioWindow");null!==o&&o.contentWindow.refreshCallOutStatus(e.callOutStatus)}if(g.getMeetingStatusObj().isLocalShareMeeting&&e.IsCallOthers)switch(e.callOutStatusRet){case 1:inmeeting.initAudioStatus()}break;case"CMD_ROSTER_ONHOLD_COUNT_CHANGED":break;case"CMD_ROSTER_ATTRIBUTE_CHANGED_FORALL":window.eev.emit(g.getConstants().FEEDBACK.CLEAR_ALL);break;case"CMD_CONF_VIDEOSENDINGSTATUS_CHANGED":break;case"CMD_CONF_SILENTMODE_CHANGED":1==e.inSlientMode?inmeeting.enterWaitingRoom():0==e.inSlientMode&&(inmeeting.outWaitingRoom(),inmeeting.setIsOutWaitingRoom(!0));break;case"CMD_SHOW_PRACTICESESSION_STATUS_CHANGED":var s=e.isInPracticeSession;inmeeting.onPracticeSessionStatusChange(s);break;case"CMD_SHARE_READY":g.getMeetingStatusObj().canStartShare=1;break;case"CMD_CONF_REMINDER_RECORDING":kiosk.RecordConsent.onRecordingConsentRemind();break;case"CMD_CONF_ALLOW_PANELISTS_VOTE_STATUS_CHANGED":var r=e.isAllowPanelistsVote;inmeeting.onAllowPanelistsVoteStatusChange(r);break;case"CMD_AUTO_SHOW_AUDIO_SELECTION_DLG":userSettings.getAppSetting(userSettings.ALWAYS_USE_VOIP_WHEN_JOIN)||winMgr.createWindow("joinAudioWindow","build/window/joinaudioWindow.html",{width:570,height:278},function(e){e.contentWindow.initJoinAudioWindow()});break;case"CMD_CONF_MEETING_TOPIC_CHANGED":g.getMeetingStatusObj().meetingTopic=e.strMeetingTopic,window.eev.emit(g.getConstants().INMEETING_INFO_WINDOW.CHANGE,{topic:e.strMeetingTopic});break;case"CMD_CONF_MEETING_TOPIC_CHANGE_FAILED":window.eev.emit(g.getConstants().INMEETING_INFO_WINDOW.CHANGE,{topic:g.getMeetingStatusObj().meetingTopic});break;case"CMD_CONF_ALLOW_PARTICIPANT_RENAME_STATUS_CHANGED":g.getMeetingStatusObj().isAllowParticipantRename=e.isAllowParticipantRename,g.getMeetingStatusObj().isAllowParticipantRename||myStatusObject.isHost||myStatusObject.isCoHost||client.closeDivWindow("window-rename");break;case"CMD_CONF_BANDWIDTH_LIMIT_STATUS_CHANGED":var d=0;e.disable_send_video&&e.disable_receive_video?d=2:e.disable_send_video&&!e.disable_receive_video?d=3:!e.disable_send_video&&e.disable_receive_video?d=4:e.bandwidth_limit_enabled&&(d=1),mainAppHtmlWindow.g.getMeetingStatusObj().bandwidthLimit={bandwidth_limit_type:d,bandwidth_limit_up:e.bandwidth_limit_up,bandwidth_limit_down:e.bandwidth_limit_down,disable_send_video:e.disable_send_video,disable_receive_video:e.disable_receive_video},client.refreshBandWidthLimit(),window.eev.emit(window.g.getConstants().SHOW_BANDWIDTH_LIMIT),"start_my_video"===e.action?inmeeting.startMyVideo():"stop_my_video"===e.action?inmeeting.stopMyVideo():"restart_my_video"===e.action&&inmeeting.needAutoStartMyVideo()&&(inmeeting.stopMyVideo(),inmeeting.startMyVideo()),inmeeting.forceFreshCurrentView()}}function handleMyselfAudioTypeChanged(e,t,n){participants.refreshShareMainWindowStatus();var i=winMgr.getWinByWinId("joinAudioWindow");"AUDIO_NONE"==e?(inmeeting.stopAudio(),hidePhone(),null!==i&&(i.contentWindow.refreshCallOutStatus("CALLOUT_STATUS_ZOOM_CALL_CACELED"),i.contentWindow.showConnectedUI("none"),i.contentWindow.showBindPhoneInfo()),saveToLocal("audioStatus","none")):"AUDIO_VOIP"==e?(uiAgent.refreshMuteButton(n.audioIsMuted),showMute(),hideAudio(),hidePhone(),g.getMeetingStatusObj().meetingIsViewOnly||inmeeting.showNotice("You are using the computer audio."),null!==i&&i.close(),saveToLocal("audioStatus","voip")):"AUDIO_TELEPHONY"==e&&(hideMute(),inmeeting.joinPhone(),uiAgent.refreshMuteButton(n.audioIsMuted),inmeeting.showNotice("You are using the phone."),n.isCallIn&&(saveToLocal("audioStatus","callin"),null!==i&&i.close())),g.getMeetingStatusObj().isBOEnabled&&!g.getMeetingStatusObj().isBOInOutStatusShowed&&(LaunchConfReason_JoinBO==g.getMeetingStatusObj().launchReason?(inmeeting.showNotice("You are now in a Breakout Room."),g.getMeetingStatusObj().isBOInOutStatusShowed=!0):LaunchConfReason_LeaveBO==g.getMeetingStatusObj().launchReason&&(inmeeting.showNotice("You are now in the main session."),g.getMeetingStatusObj().isBOInOutStatusShowed=!0))}function handleMessageUserStatusChanged(e){var t=getAttendeeObject(e.userId,!0);if("number"!=typeof e.userStatus)switch(e.userStatus){case"CMD_SHARE_ACTIVEUSER":0==e.userId?(uiAgent.showShareOption(0),uiAgent.showIsStartingShare(0),client.stopShare(),toolbar.isShow()&&client.showSwitchView(1),client.disableMergeToWindow(!1),uiAgent.showTurnPage(1),g.getMeetingStatusObj().activeShareUserId=0,g.getMeetingStatusObj().isInSharing=!1,commonModule.rendererMgr.getInstance().onGeneralShareStatus(0)):(t&&t.isMyself&&0!=g.getMeetingStatusObj().activeShareUserId&&uiAgent.showShareOption(0),g.getMeetingStatusObj().activeShareUserId=e.userId,commonModule.rendererMgr.getInstance().onGeneralShareStatus(1),t&&t.isMyself?(mainWindow.minimize(),createShareWindow("shareMainWindow")):(g.getMeetingStatusObj().isHDMISharing&&kiosk.Share.onHDMISelfShareStart(0),client.stopShare(),uiAgent.showShareOption(!g.getMeetingStatusObj().isInWaitingRoom),t&&inmeeting.setShareUserName(t.name),g.getMeetingStatusObj().isInSharing=!0));break;case"CMD_SHARE_DATASIZECHANGED":e.shareWidth,e.shareHeight;break;case"CMD_SHARE_USERSENDINGSTATUS":if(!e.isMyself)break;null!==(s=mainAppHtmlWindow.winMgr.getWinByWinId("shareMainWindow"))&&(e.bPaused?s.contentWindow.showPausedUI():s.contentWindow.showSharingUI());break;case"CMD_SHARE_USERRECEIVINGSTATUS":break;case"CMD_AUDIO_TYPE_CHANGED":var n=e.audioType,i=e.isMyself;t&&(t.audioType=n,t.audioIsMuted=e.audioIsMuted,commonModule.rendererMgr.getInstance().onUserAudioStatusChange(e),uiAgent.refreshAttendeeAudioType(t),inmeeting.showMuteIcon(t.audioIsMuted,e.userId,t.audioType)),i&&handleMyselfAudioTypeChanged(e.audioType,e.audioIsMuted,e);break;case"CMD_VIDEO_STATUS":t&&(t.isMyself&&(e.videoIsSending?uiAgent.updateVideoButton(!1):uiAgent.updateVideoButton(!0)),t.videoHasCamera=e.videoHasCamera,t.videoIsSending=e.videoIsSending,commonModule.rendererMgr.getInstance().onUserVideoStatusChange(e));break;case"CMD_HOST_CHANGED":var a=!1,o=findHostAttendeeObject(!0),s=winMgr.getWinByWinId("shareMainWindow");if(g.getMeetingStatusObj().hostId=e.userId,o&&(o.isHost=0,o.id!==e.userId&&(a=!0)),t&&(t.isHost=1,t.isCoHost=0,g.getMeetingStatusObj().hostName=t.name),t&&t.isMyself?(t.isOrgHost&&!a||uiAgent.showPromptForHostChange(),chatObject.isHost=1,chat.refreshChatConsole(),uiAgent.refreshChatPriviledgeUI(chatObject.attendeeChatPriviledge),uiAgent.refreshAttendeeChatUI(),inmeeting.outWaitingRoom(),g.getMeetingStatusObj().isMuteOnEntryOn=e.isMuteOnEntryOn,g.getMeetingStatusObj().isPlayChimeOn=e.isPlayChimeOn,g.getMeetingStatusObj().isMeetingLocked=e.isMeetingLocked,g.getMeetingStatusObj().isShareLocked=e.isShareLocked,g.getMeetingStatusObj().isHostMuteAll=e.isHostMuteAll,g.getMeetingStatusObj().allowUnmute=e.allowUnmute,g.getMeetingStatusObj().isPutOnHoldOnEntryOn=e.isPutOnHoldOnEntryOn,g.getMeetingStatusObj().isAllowParticipantRename=e.isAllowParticipantRename,client.refreshMeetingStatus(),g.getMeetingStatusObj().isWebinar&&(showPollingButtonInToolbar(1),null!==s&&s.contentWindow.showPollingButtonInToolbar(1)),setTimeout(function(){g.getMeetingStatusObj().isBOEnabled&&(closeWindow("joinBoWin"),client.hideBroadcastMsg(),inmeeting.clearBoObjParams(),inmeeting.getAllBOInfo(),inmeeting.showHideBoButtonOnToolbar())},10)):(chatObject.isHost=0,inmeeting.handleBoHostChanged(),inmeeting.showHideCCButtonOnToolbar(),chat.refreshChatConsole(),uiAgent.refreshChatPriviledgeUI(chatObject.attendeeChatPriviledge),uiAgent.refreshAttendeeChatUI(),isWebinarViewerMode()||t&&uiAgent.showPromptForHostChange(t.name),showPollingButtonInToolbar(0),null!==s&&s.contentWindow.showPollingButtonInToolbar(0),g.getMeetingStatusObj().isBOEnabled&&inmeeting.getMyBOStatus(),client.hideShareOptionAndAdvancedWindow(),window.eev.emit(window.g.getConstants().SHOW_SECURITY_WINDOW,!1),window.eev.emit(window.g.getConstants().INVITE_WHEN_MEETING_LOCKED,{show:!1})),g.getMeetingStatusObj().hostId&&!myStatusObject.isHost&&$(".waitingRoomNotice").addClass("forceHide"),(g.getMeetingStatusObj().isAllowParticipantRename||myStatusObject.isHost||myStatusObject.isCoHost)&&(myStatusObject.isHost||myStatusObject.isCoHost||101!==userStatus.snsType||!managedStorage.SSOLoginRenameDisabled)&&(myStatusObject.isHost||myStatusObject.isCoHost||2!==userStatus.snsType||!managedStorage.GoogleLoginRenameDisabled)||client.closeDivWindow("window-rename"),uiAgent.refreshForHostChange(),toolbar.showShareOptionArrow(),g.getMeetingStatusObj().isWebinar&&!g.getMeetingStatusObj().meetingIsViewOnly&&client.refreshByViewerList(),g.getMeetingStatusObj().isWebinar&&t.isMyself)if(void 0!==pollingDocObject)initPollingWindowUI(),refreshPollingWindowByStatus(!0),null!==(c=winMgr.getWinByWinId("pollWindow"))&&c.contentWindow.poll.refreshPollingWindowUI();g.getMeetingStatusObj().isWebinar||g.getMeetingStatusObj().inBO?toolbar.showToolbarIcon("security",!1):myStatusObject.isHost||myStatusObject.isCoHost?toolbar.showToolbarIcon("security",!0):toolbar.showToolbarIcon("security",!1),inmeeting.canShowCCButton();var r=e.isInPracticeSession;inmeeting.onPracticeSessionStatusChangeForHostChange(r);break;case"CMD_BO_MODERATOR_CHANGED":s=winMgr.getWinByWinId("shareMainWindow");if(t){t.isCoHost=e.isBOModerator,chatObject.isCoHost=e.isBOModerator,g.getMeetingStatusObj().coHost.push({id:t.id,name:t.name}),setTimeout(function(){inmeeting.clearBoObjParams(),inmeeting.getAllBOInfo(),inmeeting.showHideBoButtonOnToolbar()},10),uiAgent.refreshForHostChange(),uiAgent.refreshChatPriviledgeUI(chatObject.attendeeChatPriviledge),uiAgent.refreshAttendeeChatUI(),chat.refreshChatConsole();var d=e.isInPracticeSession;inmeeting.onPracticeSessionStatusChangeForHostChange(d)}break;case"CMD_USER_ASSIGNCOHOST":s=winMgr.getWinByWinId("shareMainWindow");if(t){if(t.isCoHost=e.isCoHost,chatObject.isCoHost=e.isCoHost,t.isCoHost?(g.getMeetingStatusObj().coHost.push({id:t.id,name:t.name}),t.isMyself&&(g.getMeetingStatusObj().isMuteOnEntryOn=e.isMuteOnEntryOn,g.getMeetingStatusObj().isPlayChimeOn=e.isPlayChimeOn,g.getMeetingStatusObj().isMeetingLocked=e.isMeetingLocked,g.getMeetingStatusObj().isShareLocked=e.isShareLocked,g.getMeetingStatusObj().isHostMuteAll=e.isHostMuteAll,g.getMeetingStatusObj().allowUnmute=e.allowUnmute,g.getMeetingStatusObj().isPutOnHoldOnEntryOn=e.isPutOnHoldOnEntryOn,g.getMeetingStatusObj().isAllowParticipantRename=e.isAllowParticipantRename,g.getMeetingStatusObj().isWebinar&&(showPollingButtonInToolbar(1),null!==s&&s.contentWindow.showPollingButtonInToolbar(1)),g.getMeetingStatusObj().isWebinar||g.getMeetingStatusObj().inBO?toolbar.showToolbarIcon("security",!1):toolbar.showToolbarIcon("security",!0))):t.isCoHost||(g.getMeetingStatusObj().coHost.pop(),t.isMyself&&(toolbar.showToolbarIcon("security",!1),window.eev.emit(window.g.getConstants().SHOW_SECURITY_WINDOW,!1),window.eev.emit(window.g.getConstants().INVITE_WHEN_MEETING_LOCKED,{show:!1}),showPollingButtonInToolbar(0),null!==s&&s.contentWindow.showPollingButtonInToolbar(0),client.hideShareOptionAndAdvancedWindow(),g.getMeetingStatusObj().isAllowParticipantRename?!myStatusObject.isHost&&101===userStatus.snsType&&managedStorage.SSOLoginRenameDisabled?client.closeDivWindow("window-rename"):!myStatusObject.isHost&&2===userStatus.snsType&&managedStorage.GoogleLoginRenameDisabled&&client.closeDivWindow("window-rename"):client.closeDivWindow("window-rename"))),g.getMeetingStatusObj().isWebinar&&t.isMyself){var c;if(void 0!==pollingDocObject)initPollingWindowUI(),refreshPollingWindowByStatus(),null!==(c=winMgr.getWinByWinId("pollWindow"))&&c.contentWindow.poll.refreshPollingWindowUI();g.getMeetingStatusObj().meetingIsViewOnly||client.refreshByViewerList()}inmeeting.showHideBoButtonOnToolbar(),uiAgent.refreshForHostChange(),toolbar.showShareOptionArrow(),uiAgent.refreshChatPriviledgeUI(chatObject.attendeeChatPriviledge),uiAgent.refreshAttendeeChatUI(),chat.refreshChatConsole();var l=e.isInPracticeSession;inmeeting.onPracticeSessionStatusChangeForHostChange(l)}break;case"CMD_ACTIVE_AUDIO":client.refreshTalkingUserIcon(e);break;case"CMD_VIDEO_QUALITY_CHANGED":t&&(t.netQuality=e.networkQuality.toLowerCase()),inmeeting.showNetworkBandwidth(e.networkQuality.toLowerCase(),e.userId),commonModule.rendererMgr.getInstance().onUserNetworkQualityChange(e);break;case"CMD_RECORD_PRIVILEGE_CHANGED":t&&(t.canRecord=e.canRecord);break;case"CMD_VIDEO_REQUEST_UNMUTE_BYHOST":myStatusObject.videoMuteByHost=!1,myStatusObject.videoMuteByCoHost=!1;e.byCoHost&&"The co-host has asked you to start your video.",client.showDivWindow("window-startvideo"),accessibility.focusWithoutOutline(".window-startvideo .div-text");break;case"CMD_VIDEO_MUTEBYHOST":e.byCoHost?(myStatusObject.videoMuteByCoHost=!0,inmeeting.showNotice("Co-Host has stopped your video.")):(myStatusObject.videoMuteByHost=!0,inmeeting.showNotice("Host has stopped your video.")),inmeeting.stopMyVideo();break;case"CMD_USER_RAISE_HAND":inmeeting.refreshPlistHand(1,e.userId);break;case"CMD_USER_LOWER_HAND":inmeeting.refreshPlistHand(0,e.userId);break;case"CMD_USER_FEEDBACK_CHANGED":inmeeting.refreshPlistFeedback(e.userFeedback,e.userId);break;case"CMD_ACTIVE_VIDEO_FOR_DECK":inmeeting.updateActiveUser(e.userId),commonModule.rendererMgr.getInstance().onActiveSpeakUser(e.userId);break;case"CMD_ACTIVE_VIDEO_FOR2NDSCREEN":case"CMD_ACTIVE_VIDEO":break;case"CMD_TALKING_VIDEO":inmeeting.updateActiveUser(e.userId),commonModule.rendererMgr.getInstance().onActiveSpeakUser(e.userId);break;case"CMD_CC_PRIVILEGE_CHANGED":e.isMyself&&inmeeting.handleEditorChange(e.canEditCC),inmeeting.canShowCCButton()}else switch(e.userStatus){case 11:client.refreshTalkingUserIcon(e)}}