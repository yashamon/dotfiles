"use strict";function saveSettingChange(t,e){switch(t){case"alwaysUseVoIPWhenJoin":mainAppHtmlWindow.userSettings.setAppSetting("audio",mainAppHtmlWindow.userSettings.ALWAYS_USE_VOIP_WHEN_JOIN,e),mainAppHtmlWindow.common.postMessageToNaCl({type:"audio",command:"audio.settings",alwaysUseVoIPWhenJoin:e});break;case"alwaysMuteMicWhenJoin":mainAppHtmlWindow.userSettings.setAppSetting("audio",mainAppHtmlWindow.userSettings.ALWAYS_MUTE_MIC_WHEN_JOIN,e),mainAppHtmlWindow.common.postMessageToNaCl({type:"audio",command:"audio.settings",alwaysMuteMicWhenJoin:e});break;case"micAgc":mainAppHtmlWindow.userSettings.setAppSetting("audio",mainAppHtmlWindow.userSettings.MIC_AGC,e),mainAppHtmlWindow.audioTrack&&mainAppHtmlWindow.inmeeting.changeAudioInput(mainAppHtmlWindow.audioTrack.getSettings().deviceId);break;case"neverShowVideoPreview":mainAppHtmlWindow.userSettings.setAppSetting("video",mainAppHtmlWindow.userSettings.NEVER_SHOW_VIDEO_PREVIEW,!e),mainAppHtmlWindow.common.postMessageToNaCl({type:"video",command:"video.settings",neverConfirmVideoPrivacyWhenJoinMeeting:!e});break;case"hideNonVideo":mainAppHtmlWindow.inmeeting.switchHideNonVideo(e),mainAppHtmlWindow.userSettings.setAppSetting("video",mainAppHtmlWindow.userSettings.HIDE_NON_VIDEO,e);break;case"mirrorEffect":mainAppHtmlWindow.userSettings.setAppSetting("video",mainAppHtmlWindow.userSettings.MIRROR_EFFECT,e),mainAppHtmlWindow.inmeeting.enableMirrorEffect(e)}}function bindSettingsEvt(){$(".checkbox_audio, .checkbox_video").find("input[type=checkbox]").off("change").on("change",function(){saveSettingChange($(this).data("name"),$(this).prop("checked"))}),$("#open-source-software").click(function(t){-1<mainAppHtmlWindow.backgroundWindow.getWebDomain().indexOf("zoomdev")?open("https://www.zoomdev.us/opensource?product=zoom&platform=chromeos"):open("https://www.zoom.us/opensource?product=zoom&platform=chromeos")})}function setAudioSettingStatus(){$(".checkbox_audio input[type=checkbox]").each(function(){var t,e=$(this).data("name");t=mainAppHtmlWindow.userSettings.getAppSetting(e),$(this).prop("checked",t)})}function setVideoSettingStatus(){$(".checkbox_video input[type=checkbox]").each(function(){var t=null,e=$(this).data("name");t=mainAppHtmlWindow.userSettings.getAppSetting(e),e===mainAppHtmlWindow.userSettings.NEVER_SHOW_VIDEO_PREVIEW&&(t=!t),$(this).prop("checked",t)})}function refreshConfStat(t){if("overall"==t.statType)$(".cpu-info .info-value .frequence").text(t.static_performance_info.cpu_frequence.toFixed(1)),$(".cpu-info .info-value .num").text(t.static_performance_info.cpu_num),$(".proc .cpu-zoom-bar").css("width",t.dynamic_performance_info.cpu_proc_usage+"%"),$(".proc .bar-value").text(t.dynamic_performance_info.cpu_proc_usage+"%"),$(".total .cpu-zoom-bar").css("width",t.dynamic_performance_info.cpu_total_usage+"%"),$(".total .bar-value").text(t.dynamic_performance_info.cpu_total_usage+"%");else if("audio"==t.statType){if($(".audio .value-send.frequency").text(checkValue(t.quality_statistical_info_send.sample_rate,"")),$(".audio .value-recive.frequency").text(checkValue(t.quality_statistical_info_recv.sample_rate,"")),$(".audio .value-send.latency").text(checkValue(t.network_sending_status.rtt," ms")),$(".audio .value-recive.latency").text(checkValue(t.network_receiving_status.rtt," ms")),$(".audio .value-send.jitter").text(checkValue(t.network_sending_status.jitter," ms")),$(".audio .value-recive.jitter").text(checkValue(t.network_receiving_status.jitter," ms")),-1!=t.network_sending_status.avg_loss_ratio){var e=t.network_sending_status.avg_loss_ratio/10+"%",i=t.network_sending_status.max_loss_ratio/10+"%";$(".audio .value-send.packet").text(e+"("+i+")")}else $(".audio .value-send.packet").text("-");if(-1!=t.network_receiving_status.avg_loss_ratio){e=t.network_receiving_status.avg_loss_ratio/10+"%",i=t.network_receiving_status.max_loss_ratio/10+"%";$(".audio .value-recive.packet").text(e+"("+i+")")}else $(".audio .value-recive.packet").text("-")}else if("video"==t.statType||"share"==t.statType){var a=t.statType;if($("."+a+" .value-send.latency").text(checkValue(t.network_sending_status.rtt," ms")),$("."+a+" .value-recive.latency").text(checkValue(t.network_receiving_status.rtt," ms")),$("."+a+" .value-send.jitter").text(checkValue(t.network_sending_status.jitter," ms")),$("."+a+" .value-recive.jitter").text(checkValue(t.network_receiving_status.jitter," ms")),t.network_sending_status&&-1!=t.network_sending_status.avg_loss_ratio){e=t.network_sending_status.avg_loss_ratio/10+"%",i=t.network_sending_status.max_loss_ratio/10+"%";$("."+a+" .value-send.packet").text(e+"("+i+")")}else $("."+a+" .value-send.packet").text("-");if(t.network_receiving_status&&-1!=t.network_receiving_status.avg_loss_ratio){e=t.network_receiving_status.avg_loss_ratio/10+"%",i=t.network_receiving_status.max_loss_ratio/10+"%";$("."+a+" .value-recive.packet").text(e+"("+i+")")}else $("."+a+" .value-recive.packet").text("-");if(t.quality_statistical_info_send&&-1!=t.quality_statistical_info_send.height_of_max_send_video){var n=t.quality_statistical_info_send.height_of_max_send_video,o=t.quality_statistical_info_send.width_of_max_send_video;$("."+a+" .value-send.resolution").text(o+"x"+n)}else $("."+a+" .value-send.resolution").text("-");if(t.quality_statistical_info_recv&&-1!=t.quality_statistical_info_recv.height_of_max_recv_video){n=t.quality_statistical_info_recv.height_of_max_recv_video,o=t.quality_statistical_info_recv.width_of_max_recv_video;$("."+a+" .value-recive.resolution").text(o+"x"+n)}else $("."+a+" .value-recive.resolution").text("-");$("."+a+" .value-send.fps").text(checkValue(t.quality_statistical_info_send&&t.quality_statistical_info_send.fps_of_send_max_video," fps")),$("."+a+" .value-recive.fps").text(checkValue(t.quality_statistical_info_recv&&t.quality_statistical_info_recv.fps_of_recv_max_video," fps"))}}function checkValue(t,e){return-1==t?"-":t+e}function setActiveSettingTab(t){var e=".toptabs li.toptab_"+t;$(".toptabs li").removeClass("selected").attr("aria-checked","false"),$(e).addClass("selected").attr("aria-checked","true"),$(".toptab_container .toptab-content").hide();var i=$(e).find("span").attr("data-url");$(i).show(),".toptab_about"==i&&$(".version span").text(mainAppHtmlWindow.appObject.version)}function refreshBandwidthLimitTip(){if(mainAppHtmlWindow.g.getMeetingStatusObj()&&mainAppHtmlWindow.g.getMeetingStatusObj().bandwidthLimit){var t=mainAppHtmlWindow.g.getMeetingStatusObj().bandwidthLimit.bandwidth_limit_type,e=$(".bandwidth-limit-tips");if(0<t&&0!==mainAppHtmlWindow.g.getMeetingStatusObj().meetingNo){var i="";switch(t){case 1:i="Your IT team has limited the bandwidth available for this meeting in your location. Performance may be affected.";break;case 2:i="Video has been disabled by your IT team due to network bandwidth limitations in your location. This meeting will be audio only to ensure the best possible experience.";break;case 3:i="Sending video has been disabled by your IT admin due to network bandwidth limitations in your location. Participants will not be able to see your video. ";break;case 4:i="Receiving video has been disabled by your IT team due to network bandwidth limitations in your location. You will not be able to see other participant's video. "}e.removeClass("forceHide").find(".tips-text").text(i).end().find(".upstream-text").text(mainAppHtmlWindow.g.getMeetingStatusObj().bandwidthLimit.bandwidth_limit_up+" kbps").end().find(".downstream-text").text(mainAppHtmlWindow.g.getMeetingStatusObj().bandwidthLimit.bandwidth_limit_down+" kbps")}else e.addClass("forceHide")}}window.onload=function(){chrome.runtime.getBackgroundPage(function(t){t.isKioskApp()&&$(".setting-kiosk").hide()});var e=$("#show-meeting-control-option");e.attr("checked",!!mainAppHtmlWindow.localStorage.alwaysShowMeetingControls),e.click(function(){var t=e.is(":checked");t?mainAppHtmlWindow.client.removeAutoShowUI():mainAppHtmlWindow.client.addAutoShowUI(),mainAppHtmlWindow.saveToLocal("alwaysShowMeetingControls",t)}),bindSettingsEvt(),setVideoSettingStatus(),setAudioSettingStatus(),refreshBandwidthLimitTip();setInterval(function(){mainAppHtmlWindow&&mainAppHtmlWindow.inmeeting&&(mainAppHtmlWindow.inmeeting.getOverallStat(),mainAppHtmlWindow.inmeeting.getAudioStat(),mainAppHtmlWindow.inmeeting.getVideoStat(),mainAppHtmlWindow.inmeeting.getShareStat())},300);$(".img-close").hover(function(){$(".joinAudio-close").css("background","#FF1E5A")},function(){$(".joinAudio-close").css("background","white")}),$(".joinAudio-close").off("click").click(function(){window.close()}),$(".tab1 span.button").off("click").click(function(){window.close()}),$(".tabs li").off("click").click(function(){$(".tabs li").removeClass("selected").attr("aria-checked","false"),$(this).addClass("selected").attr("aria-checked","true"),$(".tab_container .tab-content").hide();var t=$(this).find("span").attr("data-url");return $(t).show(),!1}),$(".toptabs li").off("click").click(function(t){var e=t.currentTarget.dataset.type;return""==e||setActiveSettingTab(e),!1}),a11y()};