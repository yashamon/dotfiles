"use strict";var createBo=function(){var r=void 0;function n(){var n=r.boObj.autoAssign,e=r.boObj.roomNum,o=c(r.attendeeNum,e);$("#window-createBo #count").text(r.attendeeNum),$("#window-createBo #each_bo_num").text(o),$("#window-createBo #ra").attr("checked",n),$("#window-createBo #rm").attr("checked",!n)}function e(){clearInterval(r.intervalId);var n=mainAppHtmlWindow.winMgr.getWinByWinId("createBoWin");n?n.close():$("#window-createBo").addClass("hideMe")}function c(n,e){var o,t=parseInt(n),i=parseInt(e),a=t/i;return 0!==t%i?(o=Math.floor(a))+"-"+(o+1):a}function t(){var n=mainAppHtmlWindow.g.getMeetingStatusObj().maxBOCount||50,e=$("#window-createBo #bor-spinner").spinner(),o=parseInt(e.spinner("value"));return o<1||n<o?1:o}function i(){var n=r.meeting.getAttendeesFromBoItems(),e=r.boObj.allBOInfo.unassignedBoUsers.length;return n.length+e}function o(){var n=r.meeting.getAttendeesFromBoItems();return _.concat(n,r.meeting.boObj.allBOInfo.unassignedBoUsers)}function d(){var n=r.meeting.boObj;n.roomNum=t(),n.autoAssign=$("#window-createBo #ra").is(":checked"),n.attendees=o(),n.unassignAttendees=o()}return{showCreateBo:function(){var n=mainAppHtmlWindow.winMgr.getWinByWinId("createBoWin");null===n?mainAppChromeWindow.isFullscreen()||mainAppHtmlWindow.backgroundWindow.isKioskApp()?client.toggleDivWindow("window-createBo"):inmeeting.createAssignBoWindow():n.focus()},initCreateBoWindow:function(){var a;r={meeting:mainAppHtmlWindow.inmeeting,boObj:mainAppHtmlWindow.inmeeting.boObj,attendeeNum:null,intervalId:null,isEnded:mainAppHtmlWindow.inmeeting.isEnded()},r.boObj.attendees.length,r.boObj.allBOInfo.unassignedBoUsers.length,r.attendeeNum=i(),a=mainAppHtmlWindow.g.getMeetingStatusObj().maxBOCount||50,$("#window-createBo #bor-spinner").spinner({min:1,max:a,spin:function(n,e){var o=c(r.attendeeNum,e.value);$("#window-createBo #each_bo_num").text(o)},change:function(n,e){var o=$(n.target),t=o.spinner("value");o.spinner("value",Math.max(Math.min(a,t),0));var i=c(r.attendeeNum,$("#window-createBo #bor-spinner").val());$("#window-createBo #each_bo_num").text(i)}}),$("#window-createBo #bor-spinner").spinner("value",r.boObj.roomNum),n(),mainAppChromeWindow.isFullscreen()||mainAppHtmlWindow.backgroundWindow.isKioskApp()||($("#window-createBo .window-close").click(function(){e()}),escEvt("#window-createBo",function(){e()})),$("#window-createBo .bor-crbtn").off("click").on("click",function(){d(),mainAppHtmlWindow.bo.showBo(function(n){n.contentWindow.bo.execute()}),e()}),a11y(),r.intervalId=setInterval(function(){var n=i(),e=void 0,o=void 0;n!==r.attendeeNum&&(r.attendeeNum=n,e=t(),o=c(n,e),$("#window-createBo #count").text(n),$("#window-createBo #each_bo_num").text(o))},500),setTimeout(function(){$("#window-createBo #bor-spinner").focus()},500)},bindRecallAllRoomsEvt:function(){$("#window-createBo .bor-crbtn").off("click").on("click",function(){var n=mainAppHtmlWindow.winMgr.getWinByWinId("boWin");d(),n?n.contentWindow.bo.recreateBoWindow():mainAppChromeWindow.isFullscreen()||mainAppHtmlWindow.backgroundWindow.isKioskApp()?bo.recreateBoWindow():r.meeting.createBoWindow(function(n){n.contentWindow.bo.execute()}),e()})},recreateAllRooms:function(){$("#window-createBo .bor-crbtn").text("Recreate All Rooms"),$("#window-createBo .panel-head").remove(),$("#window-createBo .bor-warning").removeClass("forceHide"),n()}}}();