"use strict";var qa=function(){function e(){mainAppHtmlWindow.qaObject.isHostAllowAnonymous?$("input#sendOption").attr("disabled",!1).closest(".send").removeClass("disabled"):$("input#sendOption").attr("disabled",!0).attr("checked",!1).closest(".send").addClass("disabled")}function i(e){var a=util.formatTime(new Date(1e3*parseInt(e.timeT))),n="You";e.senderIsMe||(n=e.isAnonymous?"Anonymous Viewer":e.senderName);var s='<div class="title"><span class="user">'+mainAppHtmlWindow.util.htmlEncode(n)+'</span><span class="text"> asked:</span><span class="time">'+a+"</span></div>",i='<div class="msg">'+mainAppHtmlWindow.util.htmlEncode(e.questionText).replace(/[\r\n]/g,"<br>")+"</div>",t='<div class="question">'+s+anchorme({input:i,options:{attributes:{target:"_blank"},exclude:function(e){return!e.startsWith("http:/")&&!e.startsWith("https:/")}}})+"</div>",o='<div class="qa" data-name="'+e.questionID+'">'+t+"</div>";return $(".qa-content").append(o),$(".qa-content").html()}function t(e){var a=util.formatTime(new Date(1e3*parseInt(e.timeT))),n=mainAppHtmlWindow.util.htmlEncode(e.senderName),s="";if(e.isLiveAnswer){s='<div class="answer answer-live">'+('<div class="notice">'+(t='<div class="live-text"><span class="text">'+n+' has answered this question live.</span> <span class="time">'+a+"</span></div>")+"</div>")+"</div>"}else{var i='<div class="title"><span class="user">'+n+'</span> <span class="text"> answered'+(e.isPrivate?" (privately)":"")+':</span><span class="time">'+a+"</span></div>",t='<div class="msg">'+mainAppHtmlWindow.util.htmlEncode(e.answerText).replace(/[\r\n]/g,"<br>")+"</div>";s='<div class="answer answer-text">'+i+anchorme({input:t,options:{attributes:{target:"_blank"},exclude:function(e){return!e.startsWith("http:/")&&!e.startsWith("https:/")}}})+"</div>"}return o(e,0),$('.qa-content .qa[data-name="'+e.questionID+'"]').append(s),$(".qa-content").html()}function o(e,a){if(a){var n='<div class="live-answer-notice">'+mainAppHtmlWindow.util.htmlEncode(e.liveAnswering0.liveAnsweringName)+" would like to answer this question live.</div>";$('.qa[data-name="'+e.questionID+'"]').append(n)}else $('.qa[data-name="'+e.questionID+'"] .live-answer-notice').remove();return $(".qa-content").html()}function a(e){e?($(".webinar-viewer-bar span.qa-number-viewer").text(mainAppHtmlWindow.qaObject.qaNum),$(".webinar-viewer-bar li.qa").addClass("remind"),$(".webinar-viewer-bar i.img-viewerqa").removeClass("forceHide"),$(".webinar-viewer-bar span.qa-number-viewer").removeClass("forceHide")):(mainAppHtmlWindow.qaObject.qaNum=0,$(".webinar-viewer-bar li.qa").removeClass("remind"),$(".webinar-viewer-bar i.img-viewerqa").addClass("forceHide"),$(".webinar-viewer-bar span.qa-number-viewer").addClass("forceHide"),$(".webinar-viewer-bar span.qa-number-viewer").text(0))}function d(){0<mainAppHtmlWindow.qaObject.openNum?u(1):u(0)}function l(e){var a=util.formatTime(new Date(1e3*parseInt(e.timeT))),n=mainAppHtmlWindow.common.formatNameByLength(e.senderName,30);e.isAnonymous&&(n="Anonymous Viewer");var s='<div class="title"><span class="user">'+mainAppHtmlWindow.util.htmlEncode(n)+'</span><span class="text"> asked:</span><span class="time">'+a+'</span><span class="dismiss" data-name="dismiss">Dismiss</span></div>',i='<div class="msg">'+mainAppHtmlWindow.util.htmlEncode(e.questionText).replace(/[\r\n]/g,"<br>")+"</div>",t='<div class="question">'+s+anchorme({input:i,options:{attributes:{target:"_blank"},exclude:function(e){return!e.startsWith("http:/")&&!e.startsWith("https:/")}}})+"</div>",o='<div class="qa" data-name="'+e.questionID+'">'+t+q("forQuestion")+"</div>";return $(".qa-questions").append(o),$(".qa-questions").html()}function m(e){var a=$(".qa[data-name='"+e+"']").remove();0!==a.length&&(a.find(".qa-form").replaceWith(q("forDismissed")),a.find(".dismiss").addClass("hideMe"),$(".qa-dismissed").append(a))}function r(e){var a=$(".qa[data-name='"+e+"']").remove();0!==a.length&&(a.find(".dismiss").removeClass("hideMe"),0===a.find(".answer").length?(a.find(".qa-form").replaceWith(q("forQuestion")),$(".qa-questions").append(a)):(a.find(".qa-form").replaceWith(q("forAnswer")),$(".qa-answers").append(a)))}function p(e){var a=util.formatTime(new Date(1e3*parseInt(e.timeT))),n="",s=" has";e.senderIsMe?(n="You",s=" have"):n=mainAppHtmlWindow.util.htmlEncode(mainAppHtmlWindow.common.formatNameByLength(e.senderName,30));var i="";if(e.isLiveAnswer){i='<div class="answer answer-live">'+('<div class="notice">'+(o='<div class="live-text"><span class="text">'+n+s+' answered this question live.</span> <span class="time">'+a+"</span></div>")+"</div>")+"</div>"+q("forAnswer")}else{var t='<div class="title"><span class="user">'+n+'</span> <span class="text"> answered'+(e.isPrivate?" (privately)":"")+':</span><span class="time">'+a+"</span></div>",o='<div class="msg">'+mainAppHtmlWindow.util.htmlEncode(e.answerText).replace(/[\r\n]/g,"<br>")+"</div>";i='<div class="answer"><div class="answer-text">'+t+anchorme({input:o,options:{attributes:{target:"_blank"},exclude:function(e){return!e.startsWith("http:/")&&!e.startsWith("https:/")}}})+"</div></div>"+q("forAnswer")}if(c(e,0),0==$('.qa-answers .qa[data-name="'+e.questionID+'"]').length){var d=$('.qa-questions .qa[data-name="'+e.questionID+'"]');$(".qa-answers").append(d.prop("outerHTML"))}var l=!0;0<$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form .input').length&&!$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form .input').hasClass("forceHide")&&(l=!1);var m="",r=!1;return l||e.senderIsMe||(m=$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form textarea').val(),$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form label').find("input[type=checkbox]").is(":checked")&&(r=!0)),$('.qa-questions .qa[data-name="'+e.questionID+'"]').remove(),$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form').remove(),$('.qa-answers .qa[data-name="'+e.questionID+'"]').append(i),l||e.senderIsMe||($('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form textarea').val(m),$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form').find(".form1").addClass("forceHide"),$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form').find(".form2").removeClass("forceHide"),0<util.trim(m).length&&$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form .sendbtn').addClass("enabled"),$('.qa-answers .qa[data-name="'+e.questionID+'"] .qa-form label').find("input[type=checkbox]").prop("checked",r)),$(".qa-answers").html()}function q(e){var a='<div class="input form2 forceHide">\t<textarea></textarea></div>',n='<label class="form2 forceHide"><input   type="checkbox"  /><span class="label-text"> Send privately</span></label>',s="";if("forQuestion"==e)s='<div class="qa-form qa-form-question">'+a+('<div class="send">'+n+'<div class="btn-div"><span class="cancelbtn button enabled form2 forceHide" data-name="cancel">Cancel</span><span class="sendbtn button form2 forceHide" data-name="send">Send</span><span class="bylive button enabled form1" data-name="bylive">Answer Live</span><span class="bytext button enabled form1" data-name="bytext">Answer by Text</span></div>'+"</div>")+"</div>";else if("forAnswer"===e){s='<div class="qa-form qa-form-answer">'+a+('<div class="send">'+n+'<div class="btn-div"><span class="cancelbtn button enabled form2 forceHide" data-name="cancel">Cancel</span><span class="sendbtn button form2 forceHide" data-name="send">Send</span><span class="addbtn button enabled form1" data-name="add">Add an answer</span></div>'+"</div>")+"</div>"}else"forDismissed"===e&&(s='\n                <div class="qa-form qa-form-dismissed">\n                    <div class="send">\n                        <div class="btn-div">\n                            <span class="button reopen enabled" data-name="reopen">Reopen</span>\n                        </div>\n                    </div>\n                </div>\n            ');return s}function n(){$(".btn-div").undelegate("span","click").delegate("span","click",function(e){var a=$(this).attr("data-name");if("cancel"==a)$(this).closest(".qa-form").find(".form2").addClass("forceHide"),$(this).closest(".qa-form").find(".form1").removeClass("forceHide");else if("send"==a){if($(this).hasClass("enabled")){var n=0,s=$(this).closest(".send").find("input[type=checkbox]"),i=$(this).closest(".qa-form").find("textarea"),t=$(this).closest(".qa").attr("data-name");s.is(":checked")&&(n=1),mainAppHtmlWindow.inmeeting.answerQAQuestion(t,i.val(),n),i.val("")}}else if("bylive"==a){t=$(this).closest(".qa").attr("data-name");mainAppHtmlWindow.inmeeting.startQALiving(t)}else"bytext"!=a&&"add"!=a||($(this).closest(".qa-form").find(".form1").addClass("forceHide"),$(this).closest(".qa-form").find(".form2").removeClass("forceHide"))}),$(".window-qa-plist .qa-form textarea").bind("input propertychange",function(){0<util.trim(this.value).length?$(this).closest(".qa-form").find(".sendbtn").addClass("enabled"):$(this).closest(".qa-form").find(".sendbtn").removeClass("enabled")}),$(".donebtn").off("click").click(function(){var e=$(this).closest(".qa").attr("data-name");mainAppHtmlWindow.inmeeting.endQALiving(e)})}function c(e,a){if(a){var n=e.liveAnswering0.liveAnsweringName,s='<span class="donebtn">Done</span>';e.liveAnswering0.liveAnsweringIsMe?n="You":s="";var i='<div class="live-answer-notice">'+n+" would like to answer this question live."+s+"</div>";$('.qa[data-name="'+e.questionID+'"]').append(i)}else $('.qa[data-name="'+e.questionID+'"] .live-answer-notice').remove();return $('.qa-questions .qa[data-name="'+e.questionID+'"] .qa-form').remove(),$(".qa-questions").html()}function s(){$(".qa-tab .question-count").text(mainAppHtmlWindow.qaObject.openNum),$(".qa-tab .answer-count").text(mainAppHtmlWindow.qaObject.answeredNum),$(".qa-tab .dismissed-count").text(mainAppHtmlWindow.qaObject.dismissedNum)}function u(e){var a=mainAppHtmlWindow.qaObject.openNum;e?($(".qa-number").text(a),$(".qa-number").removeClass("forceHide"),mainAppHtmlWindow.client.autoShow(1,1),mainAppHtmlWindow.toolbar.mouseMoveBind(!1,!1),mainAppHtmlWindow.toolbar.mouseEnterLeaveBind(!1)):($(".qa-number").addClass("forceHide"),$(".qa-number").text(0),mainAppHtmlWindow.toolbar.mouseMoveBind(),mainAppHtmlWindow.toolbar.mouseEnterLeaveBind())}function w(){0<mainAppHtmlWindow.qaObject.openNum?$(".qa-questions .empty-notice").remove():($(".qa-questions .empty-notice").remove(),$(".qa-questions").append('<div class="empty-notice">You have no open questions</div>')),0<mainAppHtmlWindow.qaObject.answeredNum?$(".qa-answers .empty-notice").remove():($(".qa-answers .empty-notice").remove(),$(".qa-answers").append('<div class="empty-notice">You have no answered questions</div>')),0<mainAppHtmlWindow.qaObject.dismissedNum?$(".qa-dismissed .empty-notice").remove():($(".qa-dismissed .empty-notice").remove(),$(".qa-dismissed").append('<div class="empty-notice">You have no dismissed questions</div>'))}return{initQAWin:function(){$(".window-qa-plist").addClass("hideMe"),$(".window-qa").addClass("hideMe"),mainAppHtmlWindow.g.getMeetingStatusObj().meetingIsViewOnly?($(".window-qa").removeClass("hideMe"),$(".window-qa .qa-form textarea").bind("input propertychange",function(){0<util.trim(this.value).length?$(".window-qa .send .button").addClass("enabled"):$(".window-qa .send .button").removeClass("enabled")}),$(".window-qa .send .button").off("click").click(function(){var e=!!mainAppHtmlWindow.qaObject.isHostAllowAnonymous&&$("#sendOption").is(":checked");mainAppHtmlWindow.inmeeting.askQAQuestion($(".window-qa .qa-form textarea").val(),e?1:0),$(".window-qa .qa-form textarea").val(""),$(".window-qa .send .button").removeClass("enabled")}),$("#sendOption").off("click").click(function(){mainAppHtmlWindow.qaObject.anonymously=$("#sendOption").is(":checked")}),$("#sendOption").attr("checked",mainAppHtmlWindow.qaObject.anonymously),$(".window-qa .qa-content").html(mainAppHtmlWindow.qaObject.qaContent),e()):($(".window-qa-plist").removeClass("hideMe"),$(".window-qa-plist .qa-tab").undelegate("li","click").delegate("li","click",function(e){var a=$(this).attr("data-name");$(".window-qa-plist .qa-tab li").removeClass("selected"),$(".window-qa-plist .qa-questions").addClass("hideMe"),$(".window-qa-plist .qa-answers").addClass("hideMe"),$(".window-qa-plist .qa-dismissed").addClass("hideMe"),"question"==a?($(this).addClass("selected"),$(".window-qa-plist .qa-questions").removeClass("hideMe")):"answer"==a?($(this).addClass("selected"),$(".window-qa-plist .qa-answers").removeClass("hideMe")):"dismissed"==a&&($(this).addClass("selected"),$(".window-qa-plist .qa-dismissed").removeClass("hideMe"))}),$(".window-qa-plist").off("click",".dismiss, .reopen").on("click",".dismiss, .reopen",function(e){var a=$(this).closest(".qa").data("name");"dismiss"==$(this).data("name")?mainAppHtmlWindow.client.qaDismissQuestion(a):"reopen"==$(this).data("name")&&mainAppHtmlWindow.client.qaReopenQuestioin(a)}),$(".window-qa-plist .qa-questions").html(mainAppHtmlWindow.qaObject.qaQuestions),$(".window-qa-plist .qa-answers").html(mainAppHtmlWindow.qaObject.qaAnswers),$(".window-qa-plist .qa-dismissed").html(mainAppHtmlWindow.qaObject.qaDismissed),n(),s(),w()),a11y()},refreshQAContent:function(e,a){var n=mainAppHtmlWindow.winMgr.getWinByWinId("qaWin");if(mainAppHtmlWindow.g.getMeetingStatusObj().meetingIsViewOnly){var s="";"question"==a&&(s=i(e),null!==n&&n.contentWindow.qa.addQAQuestion(e)),"answer"==a&&(s=t(e),null!==n&&n.contentWindow.qa.addQAAnswer(e)),"live"==a&&e.questionSenderIsMe&&(s=o(e,1),null!==n&&n.contentWindow.qa.showLiveReply(e,1)),mainAppHtmlWindow.qaObject.qaContent=s}else s="","question"==a&&(s=l(e),null!==n&&n.contentWindow.qa.addQAQuestion4Plist(e),mainAppHtmlWindow.qaObject.openNum=$(".qa-questions .qa").length,mainAppHtmlWindow.qaObject.qaQuestions=$(".qa-questions").html()),"answer"==a&&(s=p(e),null!==n&&n.contentWindow.qa.addQAAnswer4Plist(e),mainAppHtmlWindow.qaObject.openNum=$(".qa-questions .qa").length,mainAppHtmlWindow.qaObject.answeredNum=$(".qa-answers .qa").length,mainAppHtmlWindow.qaObject.qaAnswers=$(".qa-answers").html(),mainAppHtmlWindow.qaObject.qaQuestions=$(".qa-questions").html()),"dismiss"==a&&(m(e.questionID),mainAppHtmlWindow.qaObject.qaAnswers=$(".qa-answers").html(),mainAppHtmlWindow.qaObject.qaQuestions=$(".qa-questions").html(),mainAppHtmlWindow.qaObject.qaDismissed=$(".qa-dismissed").html(),mainAppHtmlWindow.qaObject.openNum=$(".qa-questions .qa").length,mainAppHtmlWindow.qaObject.answeredNum=$(".qa-answers .qa").length,mainAppHtmlWindow.qaObject.dismissedNum=$(".qa-dismissed .qa").length,null!=n&&n.contentWindow.qa.handleDismissedQuestion(e.questionID)),"reopen"==a&&(r(e.questionID),mainAppHtmlWindow.qaObject.qaAnswers=$(".qa-answers").html(),mainAppHtmlWindow.qaObject.qaQuestions=$(".qa-questions").html(),mainAppHtmlWindow.qaObject.qaDismissed=$(".qa-dismissed").html(),mainAppHtmlWindow.qaObject.openNum=$(".qa-questions .qa").length,mainAppHtmlWindow.qaObject.answeredNum=$(".qa-answers .qa").length,mainAppHtmlWindow.qaObject.dismissedNum=$(".qa-dismissed .qa").length,null!=n&&n.contentWindow.qa.handleReopenQuestion(e.questionID)),"live"==a&&(s=c(e,1),null!==n&&n.contentWindow.qa.showLiveReply4Plist(e,1),mainAppHtmlWindow.qaObject.qaQuestions=$(".qa-questions").html()),d(),null!==n&&(n.contentWindow.qa.bindEvent4PlistForm(),n.contentWindow.qa.refreshQANum4Plist(),n.contentWindow.qa.showEmptyQANotice())},addQAQuestion:i,addQAAnswer:t,showLiveReply:o,refreshQARemind:function(){null===mainAppHtmlWindow.winMgr.getWinByWinId("qaWin")?(mainAppHtmlWindow.qaObject.qaNum=mainAppHtmlWindow.qaObject.qaNum+1,a(1)):mainAppHtmlWindow.qaObject.qaNum=0},showQARemind4Viewer:a,addQAQuestion4Plist:l,bindEvent4PlistForm:n,addQAAnswer4Plist:p,showLiveReply4Plist:c,refreshQANum4Plist:s,refreshQARemind4Plist:d,showQARemind4Plist:u,showEmptyQANotice:w,updateHosAllowAnnoymous:e,handleDismissedQuestion:m,handleReopenQuestion:r}}();